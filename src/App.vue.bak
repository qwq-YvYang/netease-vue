<script setup>
import { ref, computed, onMounted, onUnmounted } from 'vue'
import { ElMessage, ElNotification } from 'element-plus'
import { Microphone, Moon, Sunny, Search, Delete, Link, VideoPlay, InfoFilled, Setting, User, Monitor, Download, Document, Check, RefreshLeft, FolderOpened, EditPen, Loading, QuestionFilled, List, Refresh, DocumentCopy } from '@element-plus/icons-vue'
// ä½¿ç”¨æ‡’åŠ è½½å¯¼å…¥ç»„ä»¶ä»¥å‡å°‘åˆå§‹åŒ…å¤§å°
import MusicPlayer from './components/MusicPlayer.vue'
import ChangelogModal from './components/ChangelogModal.vue'
import SponsorModal from './components/SponsorModal.vue'
import PlaylistDetail from './components/PlaylistDetail.vue'
import musicApi, { QUALITY_LEVELS } from './services/musicApi.js'
import { setCookie, getCookie } from './utils/cookies.js'

// å¯¼å…¥æ–°çš„æ¨¡å—åŒ–åŠŸèƒ½
import { isDark, setupSystemThemeListener, cleanupSystemThemeListener, applyThemeFromSettings, detectSystemTheme, applyTheme } from './utils/themeManager.js'
import { settings, loadSettings, saveSettings } from './utils/settingsManager.js'
import { 
  musicUrl, loading, musicInfo, playlistUrl, playlistLoading, playlistInfo,
  parseStartTime, elapsedTime, parseMusic, parsePlaylist, clearMusicResult, clearPlaylistResult, setExampleUrl, cleanupTimer,
  currentParsingTrack, parsingProgress, parseLimit, currentOffset, totalParsed, isLoopParsing, parseNextPage, resetLoopParseState
} from './utils/parseManager.js'
import { 
  currentPage, pageSize, totalTracks, allTracks, displayTracks, 
  updateDisplayTracks, handlePageChange
} from './utils/paginationManager.js'
import { isMobile, initDeviceDetection, cleanupDeviceDetection } from './utils/deviceDetector.js'
import { getCurrentExampleLinks } from './utils/exampleData.js'

// æœ¬åœ°ç»„ä»¶çŠ¶æ€
const selectedQuality = ref('lossless') // é»˜è®¤æ— æŸéŸ³è´¨
const showSettingsDialog = ref(false)
const showWelcomeDialog = ref(false)
const showChangelogDialog = ref(false)
const showSponsorDialog = ref(false)

// è§†å›¾åˆ‡æ¢ç›¸å…³
const currentView = ref('music') // 'music' æˆ– 'playlist'

// éŸ³è´¨é€‰é¡¹
const qualityOptions = Object.entries(QUALITY_LEVELS).map(([value, label]) => ({
  value,
  label
}))

// ç»„ä»¶å¸è½½æ—¶æ¸…ç†ç›‘å¬å™¨
onUnmounted(() => {
  cleanupSystemThemeListener()
  cleanupDeviceDetection()
  cleanupTimer()
})



// åˆå§‹åŒ–ä¸»é¢˜å’Œè®¾ç½®
onMounted(() => {
  loadSettings()
  
  // åˆå§‹åŒ–è®¾å¤‡æ£€æµ‹
  initDeviceDetection()
  
  // è®¾ç½®ç³»ç»Ÿä¸»é¢˜ç›‘å¬å™¨
  setupSystemThemeListener()
  
  // åº”ç”¨ä¸»é¢˜è®¾ç½®
  applyThemeFromSettings(settings.themeMode)
  
  // æ£€æŸ¥æ˜¯å¦éœ€è¦æ˜¾ç¤ºæ¬¢è¿å¼¹çª—
  setTimeout(() => {
    const hasSeenWelcome = getCookie('hasSeenWelcome')
    if (!hasSeenWelcome) {
      showWelcomeDialog.value = true
    }
  }, 1000)
})

// åˆ‡æ¢è§†å›¾
const switchView = (view) => {
  currentView.value = view
  // åˆ‡æ¢è§†å›¾æ—¶æ¸…ç©ºå¯¹åº”çš„ç»“æœ
  if (view === 'music') {
    clearPlaylistResult()
  } else if (view === 'playlist') {
    clearMusicResult()
  }
}

// å¤„ç†æ¬¢è¿å¼¹çª—ç¡®è®¤
const handleWelcomeConfirm = () => {
  // è®¾ç½®cookieï¼Œ30å¤©è¿‡æœŸ
  setCookie('hasSeenWelcome', 'true', 30)
  showWelcomeDialog.value = false
}

const useExampleLink = (link, name) => {
  if (currentView.value === 'playlist') {
    console.log('ç‚¹å‡»ç¤ºä¾‹æ­Œå•:', name)
    setExampleUrl(link, 'playlist')
    ElMessage.success(`å·²é€‰æ‹©ç¤ºä¾‹æ­Œå•: ${name}`)
  } else {
    console.log('ç‚¹å‡»ç¤ºä¾‹æ­Œæ›²:', name)
    setExampleUrl(link, 'music')
    ElMessage.success(`å·²é€‰æ‹©ç¤ºä¾‹æ­Œæ›²: ${name}`)
  }
}

// ä¸»é¢˜æ¨¡å¼æ”¹å˜
const onThemeModeChange = (value) => {
  // ç«‹å³åº”ç”¨ä¸»é¢˜å˜åŒ–
  applyThemeFromSettings(value)
}

// å¤„ç†æ­Œæ›²è§£æäº‹ä»¶
const handleTrackParsed = async (data) => {
  try {
    // å…¼å®¹æ–°æ—§å‚æ•°æ ¼å¼
    const track = data.track || data
    const quality = data.quality || selectedQuality.value
    
    // ç¡®ä¿qualityæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œé¿å…äº‹ä»¶å¯¹è±¡æ±¡æŸ“
    const qualityValue = typeof quality === 'string' ? quality : 'lossless'
    console.log('æœ€ç»ˆä¼ é€’ç»™APIçš„éŸ³è´¨å‚æ•°:', qualityValue) // è°ƒè¯•ä¿¡æ¯
    
    // æ„é€ éŸ³ä¹URLç”¨äºè§£æ
    const musicUrl = `https://music.163.com/song?id=${track.id}`
    
    // è°ƒç”¨ç°æœ‰çš„è§£æé€»è¾‘ï¼Œä½¿ç”¨ä¼ å…¥çš„éŸ³è´¨å‚æ•°
    const result = await musicApi.parseMusicInfo(musicUrl, qualityValue)
    
    // æ›´æ–°éŸ³ä¹ä¿¡æ¯
    musicInfo.value = result
    
    ElNotification({
      title: 'è§£ææˆåŠŸ',
      message: `æˆåŠŸè§£ææ­Œæ›²ï¼š${result.name} (${result.qualityName})`,
      type: 'success'
    })
  } catch (error) {
    ElMessage.error(error.message || 'è§£æå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•')
    console.error('æ­Œæ›²è§£æé”™è¯¯:', error)
  }
}

// å¤„ç†æ­Œæ›²é€‰æ‹©äº‹ä»¶
const handleTrackSelected = (track) => {
  console.log('é€‰æ‹©æ­Œæ›²:', track)
  // è¿™é‡Œå¯ä»¥æ·»åŠ é€‰æ‹©æ­Œæ›²åçš„é€»è¾‘ï¼Œæ¯”å¦‚é«˜äº®æ˜¾ç¤ºç­‰
}


</script>

<template>
  <div class="app-container">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <el-header class="app-header">
      <div class="header-content">
        <div class="header-left">
          <div class="logo">
            <el-icon class="logo-icon" :size="24">
              <Microphone />
            </el-icon>
            <span class="logo-text">ç½‘æ˜“äº‘éŸ³ä¹æ— æŸè§£æ</span>
          </div>
        </div>
        
        <div class="header-right">
          <el-button 
            @click="showSettingsDialog = true" 
            type="text" 
            class="settings-btn"
            :icon="Setting"
            circle
            size="large"
          />
        </div>
      </div>
    </el-header>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <el-container class="main-container">
      <el-main class="app-main">
        <!-- é¡µé¢æ ‡é¢˜ -->
        <div class="page-header">
          <h1 class="page-title">ç½‘æ˜“äº‘éŸ³ä¹æ— æŸè§£æ</h1>
          <p class="page-description">æ°¸ä¹…å…è´¹çš„ç½‘æ˜“äº‘éŸ³ä¹é«˜å“è´¨è§£æ</p>
        </div>

        <!-- åŠŸèƒ½åˆ‡æ¢å¡ç‰‡ -->
        <el-card class="view-switcher-container" shadow="hover">
          <template #header>
            <div class="card-header">
              <el-icon><Refresh /></el-icon>
              <span>é€‰æ‹©è§£ææ–¹å¼</span>
            </div>
          </template>
          <div class="switcher-cards">
            <div 
              class="switcher-card" 
              :class="{ active: currentView === 'music' }"
              @click="switchView('music')"
            >
              <div class="card-icon">
                <el-icon :size="24"><Link /></el-icon>
              </div>
              <div class="card-title">é“¾æ¥è§£æ</div>
            </div>
            
            <div 
              class="switcher-card" 
              :class="{ active: currentView === 'playlist' }"
              @click="switchView('playlist')"
            >
              <div class="card-icon">
                <el-icon :size="24"><Document /></el-icon>
              </div>
              <div class="card-title">æ­Œå•è§£æ</div>
            </div>
          </div>
        </el-card>

        <!-- å•æ›²è§£æè§†å›¾ -->
        <div v-show="currentView === 'music'">
          <!-- è¾“å…¥è¡¨å• -->
          <el-card class="input-card" shadow="hover">
            <template #header>
              <div class="card-header">
                <el-icon><Link /></el-icon>
                <span>éŸ³ä¹é“¾æ¥è§£æ</span>
              </div>
            </template>
            
            <el-form :model="{ musicUrl, selectedQuality }" label-width="80px">
              <el-form-item label="éŸ³ä¹é“¾æ¥">
                <el-input
                  v-model="musicUrl"
                  placeholder="è¯·è¾“å…¥ç½‘æ˜“äº‘éŸ³ä¹åˆ†äº«é“¾æ¥"
                  clearable
                  @keyup.enter="parseMusic"
                >
                  <template #prepend>
                    <el-icon><Link /></el-icon>
                  </template>
                </el-input>
              </el-form-item>
              
              <el-form-item label="éŸ³è´¨é€‰æ‹©">
                <el-select v-model="selectedQuality" placeholder="è¯·é€‰æ‹©éŸ³è´¨" style="width: 200px">
                  <el-option
                    v-for="option in qualityOptions"
                    :key="option.value"
                    :label="option.label"
                    :value="option.value"
                  >
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                      <span>{{ option.label }}</span>
                      <el-tag v-if="option.value === 'jymaster'" type="danger" size="small">æœ€é«˜</el-tag>
                      <el-tag v-else-if="option.value === 'lossless'" type="success" size="small">æ¨è</el-tag>
                    </div>
                  </el-option>
                </el-select>
              </el-form-item>
              

              <el-form-item>
                <el-button 
                  type="primary" 
                  @click="() => parseMusic(selectedQuality)" 
                  :loading="musicLoading"
                  :disabled="!musicUrl.trim()"
                  :icon="Search"
                >
                  {{ musicLoading ? 'è§£æä¸­...' : 'å¼€å§‹è§£æ' }}
                </el-button>
                
                <el-button 
                  v-if="musicResult" 
                  type="danger" 
                  @click="clearMusicResult"
                  :icon="Delete"
                  plain
                >
                  æ¸…ç©ºç»“æœ
                </el-button>
              </el-form-item>
            </el-form>
          </el-card>
        </div>

        <!-- æ­Œå•è§£æè§†å›¾ -->
        <div v-show="currentView === 'playlist'">
          <!-- æ­Œå•è¾“å…¥è¡¨å• -->
          <el-card class="input-card" shadow="hover">
            <template #header>
              <div class="card-header">
                <el-icon><Document /></el-icon>
                <span>æ­Œå•é“¾æ¥è§£æ</span>
              </div>
            </template>
            
            <el-form :model="{ playlistUrl }" label-width="80px">
              <el-form-item label="æ­Œå•é“¾æ¥">
                <el-input
                  v-model="playlistUrl"
                  placeholder="è¯·è¾“å…¥ç½‘æ˜“äº‘éŸ³ä¹æ­Œå•é“¾æ¥"
                  clearable
                  @keyup.enter="parsePlaylist"
                >
                  <template #prepend>
                    <el-icon><Link /></el-icon>
                  </template>
                </el-input>
              </el-form-item>
              
              <el-form-item label="éŸ³è´¨é€‰æ‹©">
                <el-select v-model="selectedQuality" placeholder="è¯·é€‰æ‹©éŸ³è´¨" style="width: 200px">
                  <el-option
                    v-for="option in qualityOptions"
                    :key="option.value"
                    :label="option.label"
                    :value="option.value"
                  >
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                      <span>{{ option.label }}</span>
                      <el-tag v-if="option.value === 'jymaster'" type="danger" size="small">æœ€é«˜</el-tag>
                      <el-tag v-else-if="option.value === 'lossless'" type="success" size="small">æ¨è</el-tag>
                    </div>
                  </el-option>
                </el-select>
              </el-form-item>
              
              <el-form-item>
                <el-button 
                  type="primary" 
                  @click="() => parsePlaylist(updateDisplayTracks)" 
                  :loading="playlistLoading"
                  :disabled="!playlistUrl.trim()"
                  :icon="Search"
                >
                  {{ playlistLoading ? 'è§£æä¸­...' : 'å¼€å§‹è§£æ' }}
                </el-button>
                
                <el-button 
                  v-if="playlistInfo" 
                  type="danger" 
                  @click="() => clearPlaylistResult()"
                  :icon="Delete"
                  plain
                >
                  æ¸…ç©ºç»“æœ
                </el-button>
              </el-form-item>
            </el-form>
          </el-card>

          <!-- æ­Œå•è¯¦æƒ…ç»„ä»¶ -->
          <div v-if="playlistInfo" class="playlist-section">
            <PlaylistDetail 
              :playlist-info="playlistInfo" 
              :display-tracks="displayTracks"
              :current-page="currentPage"
              :page-size="pageSize"
              :total-tracks="totalTracks"
              :selected-quality="selectedQuality"
              :loop-mode="settings.loopParseMode"
              :parse-limit="parseLimit"
              :total-parsed="totalParsed"
              :is-loop-parsing="isLoopParsing"
              @track-parsed="handleTrackParsed"
              @track-selected="handleTrackSelected"
              @page-change="handlePageChange"
              @continue-parse="parseNextPage"
            />
          </div>
        </div>

        <!-- å…¨å±æ­Œå•è§£æLoading -->        
         <div v-if="playlistLoading" class="fullscreen-loading">
           <div class="loading-content">
             <el-icon class="loading-icon" :size="48">
               <Loading />
             </el-icon>
             <div class="loading-text">æ­£åœ¨è§£ææ­Œå•ä¸­...</div>
             <div class="loading-subtitle" v-if="currentParsingTrack">
               æ­£åœ¨è§£æï¼š{{ currentParsingTrack.name }} - {{ currentParsingTrack.artist }}
             </div>
             <div class="loading-subtitle" v-else>
               è¯·ç¨å€™ï¼Œæ­£åœ¨è·å–æ­Œå•ä¿¡æ¯
             </div>
             <div class="loading-progress" v-if="parsingProgress.totalTracks > 0">
               è¿›åº¦ï¼š{{ parsingProgress.currentIndex + 1 }} / {{ parsingProgress.totalTracks }}
               (æˆåŠŸï¼š{{ parsingProgress.successfulTracks.filter(t => t.parsed).length }})
             </div>
             <div class="loading-timer">å·²ç”¨æ—¶é—´ï¼š{{ elapsedTime }}ç§’</div>
           </div>
         </div>

        <!-- æ’­æ”¾å™¨åŒºåŸŸ -->
        <div v-if="musicInfo" class="player-section">
          <Suspense>
            <template #default>
              <MusicPlayer :music-info="musicInfo" :settings="settings" />
            </template>
            <template #fallback>
              <div class="loading-placeholder">
                <el-skeleton :rows="3" animated />
                <div class="loading-text">æ­£åœ¨åŠ è½½æ’­æ”¾å™¨...</div>
              </div>
            </template>
          </Suspense>
        </div>

        <!-- ç¤ºä¾‹å’Œå¸®åŠ© -->
        <div class="help-section">
          <el-card shadow="hover">
            <template #header>
              <div class="card-header">
                <el-icon><VideoPlay /></el-icon>
                <span>ç¤ºä¾‹æ­Œæ›²ä¸æ”¯æŒæ ¼å¼</span>
              </div>
            </template>
            
            <!-- ç¤ºä¾‹åŒºåŸŸ -->
            <div class="examples-section">
              <h4 class="section-title">{{ currentView === 'playlist' ? 'ğŸ“‹ çƒ­é—¨æ­Œå•' : 'ğŸ§ çƒ­é—¨ç¤ºä¾‹' }}</h4>
              <div class="example-list">
                <div 
                  v-for="(example, index) in getCurrentExampleLinks(currentView)" 
                  :key="index"
                  class="example-item"
                  @click="useExampleLink(example.url, example.name)"
                >
                  <div class="example-info">
                    <div class="example-name">{{ example.name }}</div>
                    <div class="example-artist">{{ currentView === 'playlist' ? example.creator : example.artist }}</div>
                  </div>
                  <el-button type="text" size="small">ä½¿ç”¨</el-button>
                </div>
              </div>
            </div>
            
            <el-divider />
            
            <!-- æ”¯æŒæ ¼å¼åŒºåŸŸ -->
            <div class="formats-section">
              <h4 class="section-title">ğŸ“‹ æ”¯æŒæ ¼å¼</h4>
              <div class="format-list" v-if="currentView === 'music'">
                <el-tag class="format-item" type="info">music.163.com/song?id=xxx</el-tag>
                <el-tag class="format-item" type="info">y.music.163.com/m/song/xxx</el-tag>
                <el-tag class="format-item" type="info">music.163.com/#/song?id=xxx</el-tag>
                <el-tag class="format-item" type="info">163cn.tv/xxx</el-tag>
              </div>
              <div class="format-list" v-else>
                <el-tag class="format-item" type="success">music.163.com/playlist?id=xxx</el-tag>
                <el-tag class="format-item" type="success">music.163.com/#/playlist?id=xxx</el-tag>
                <el-tag class="format-item" type="success">y.music.163.com/m/playlist/xxx</el-tag>
                <el-tag class="format-item" type="success">music.163.com/discover/toplist?id=xxx</el-tag>
              </div>
            </div>
          </el-card>
        </div>

        <!-- ä½œè€…ä¿¡æ¯ -->
        <el-card class="author-card" shadow="hover">
          <template #header>
            <div class="card-header">
              <el-icon><User /></el-icon>
              <span>ä½œè€…ä¸è”ç³»</span>
            </div>
          </template>
          <div class="author-info">
            <p><strong>ä½œè€…ï¼š</strong> è‹æ™“æ™´</p>
            <p><strong>ä¸ªäººåšå®¢ï¼š</strong> <el-link type="primary" href="https://www.toubiec.cn" target="_blank">ç‚¹å‡»è·³è½¬</el-link></p>
            <p><strong>è”ç³»æ–¹å¼ï¼š</strong> QQ3074193836</p>
            <p><strong>ç‰ˆæƒå£°æ˜ï¼š</strong> æœ¬å·¥å…·ä»…ç”¨äºå­¦ä¹ äº¤æµï¼Œä¸æä¾›ä»»ä½•éŸ³é¢‘æ–‡ä»¶å­˜å‚¨æœåŠ¡ã€‚</p>
            <p><strong>åé¦ˆåœ°å€ï¼š</strong> <el-link type="primary" href="https://github.com/Suxiaoqinx/Netease_url/issues" target="_blank">ç‚¹å‡»è·³è½¬</el-link></p>
            <p>å¦‚æœæ‚¨åœ¨ä½¿ç”¨ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæˆ–æœ‰ä»»ä½•å»ºè®®ï¼Œæ¬¢è¿è”ç³»ï¼</p>
          </div>
        </el-card>

        <!-- å…è´£å£°æ˜ - å¸¸é©»æ˜¾ç¤º -->
        <el-card class="disclaimer-card" shadow="hover">
          <el-alert
            title="å…è´£å£°æ˜"
            description="æœ¬å·¥å…·ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè¯·æ”¯æŒæ­£ç‰ˆéŸ³ä¹ã€‚ä½¿ç”¨æœ¬å·¥å…·æ—¶è¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ï¼Œå°Šé‡éŸ³ä¹äººçš„åŠ³åŠ¨æˆæœã€‚"
            type="warning"
            :closable="false"
            show-icon
            center
          />
        </el-card>


      </el-main>
    </el-container>

    <!-- åº•éƒ¨ -->
    <el-footer class="app-footer">
      <div class="footer-content">
        <div class="footer-info">
          <div class="footer-links">
            <el-space :size="20" wrap>
              <el-link href="https://github.com/Suxiaoqinx/Netease_url" target="_blank" :underline="false">
                <el-icon><Link /></el-icon>
                GitHub
              </el-link>
              <el-link href="https://music.163.com" target="_blank" :underline="false">
                <el-icon><Microphone /></el-icon>
                ç½‘æ˜“äº‘éŸ³ä¹
              </el-link>
              <el-link href="https://element-plus.org" target="_blank" :underline="false">
                <el-icon><Document /></el-icon>
                Element Plus
              </el-link>
            </el-space>
          </div>
          
          <el-divider />
          
          <div class="footer-text">
            <div class="tech-stack">
              <el-tag size="small" type="success">Vue 3</el-tag>
              <el-tag size="small" type="primary">Element Plus</el-tag>
              <el-tag size="small" type="warning">Vite</el-tag>
              <el-tag size="small" type="info">JavaScript</el-tag>
            </div>
            
            <div class="copyright">
              Â© 2024 - 2025 ç½‘æ˜“äº‘éŸ³ä¹æ— æŸè§£æ - ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨
            </div>
            
            <div class="build-info">
              <el-text size="small" type="info">
                æ„å»ºæ—¶é—´: {{ new Date().toLocaleDateString('zh-CN') }} | 
                ç‰ˆæœ¬: v1.0.6
              </el-text>
            </div>
          </div>
        </div>
      </div>
    </el-footer>
  </div>

  <!-- è®¾ç½®å¼¹çª— -->
  <el-dialog
    v-model="showSettingsDialog"
    title="ç½‘ç«™è®¾ç½®"
    width="500px"
    :close-on-click-modal="false"
    class="settings-dialog"
    :fullscreen="isMobile"
    :show-close="!isMobile"
  >
    <!-- æ‰‹æœºç«¯é¡¶éƒ¨æ  -->
    <template v-if="isMobile" #header>
      <div class="mobile-header">
        <span class="mobile-title">ç½‘ç«™è®¾ç½®</span>
        <el-button 
          type="primary" 
          @click="saveSettings(); showSettingsDialog = false"
          class="mobile-done-btn"
          :icon="Check"
        >
          å®Œæˆ
        </el-button>
      </div>
    </template>
    <div class="settings-content">
      <!-- ä¸»é¢˜è®¾ç½® -->
      <div class="setting-section">
        <div class="section-title">
          <el-icon><Moon /></el-icon>
          <span>ä¸»é¢˜å¤–è§‚</span>
        </div>
        <div class="theme-options">
          <div 
            v-for="theme in [
              { value: 'system', icon: Monitor, label: 'è·Ÿéšç³»ç»Ÿ', desc: 'è‡ªåŠ¨é€‚é…' },
              { value: 'light', icon: Sunny, label: 'æµ…è‰²æ¨¡å¼', desc: 'æ˜äº®ç•Œé¢' },
              { value: 'dark', icon: Moon, label: 'æ·±è‰²æ¨¡å¼', desc: 'æŠ¤çœ¼ç•Œé¢' }
            ]"
            :key="theme.value"
            :class="['theme-option', { 'active': settings.themeMode === theme.value }]"
            @click="settings.themeMode = theme.value; onThemeModeChange(theme.value); saveSettings(); ElMessage.success('ä¸»é¢˜è®¾ç½®å·²ä¿å­˜')"
          >
            <el-icon class="option-icon"><component :is="theme.icon" /></el-icon>
            <div class="option-content">
              <div class="option-label">{{ theme.label }}</div>
              <div class="option-desc">{{ theme.desc }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ä¸‹è½½è®¾ç½® -->
      <div class="setting-section">
        <div class="section-title">
          <el-icon><Download /></el-icon>
          <span>ä¸‹è½½é…ç½®</span>
        </div>
        
        <!-- æ–‡ä»¶å‘½åæ ¼å¼ -->
        <div class="setting-group">
          <div class="group-title">æ–‡ä»¶å‘½åæ ¼å¼</div>
          <div class="filename-options">
            <div 
              v-for="format in [
                { value: 'song-artist', label: 'æ­Œæ›²å - æ­Œæ‰‹å', example: 'å¤œæ›² - å‘¨æ°ä¼¦', isDefault: true },
                { value: 'artist-song', label: 'æ­Œæ‰‹å - æ­Œæ›²å', example: 'å‘¨æ°ä¼¦ - å¤œæ›²', isDefault: false }
              ]"
              :key="format.value"
              :class="['filename-option', { 'active': settings.filenameFormat === format.value }]"
              @click="settings.filenameFormat = format.value; saveSettings(); ElMessage.success('æ–‡ä»¶å‘½åæ ¼å¼å·²ä¿å­˜')"
            >
              <div class="option-content">
                <div class="option-header">
                  <span class="option-title">{{ format.label }}</span>
                  <el-tag v-if="format.isDefault" size="small" type="success">é»˜è®¤</el-tag>
                </div>
                <div class="option-example">{{ format.example }}</div>
              </div>
              <div class="option-indicator">
                <div class="radio-dot"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- å…ƒæ•°æ®å†™å…¥ -->
        <div class="setting-group">
          <div class="switch-card">
            <div class="switch-content">
              <div class="switch-header">
                <el-icon class="switch-icon"><Document /></el-icon>
                <div class="switch-info">
                  <div class="switch-title">
                    å…ƒæ•°æ®å†™å…¥
                    <el-tag size="small" type="warning">ä»…é™å•æ›²</el-tag>
                  </div>
                  <div class="switch-desc">è‡ªåŠ¨å†™å…¥æ­Œæ›²ä¿¡æ¯ã€ä¸“è¾‘å°é¢ç­‰å…ƒæ•°æ®åˆ°éŸ³é¢‘æ–‡ä»¶</div>
                </div>
              </div>
            </div>
            <el-switch
              v-model="settings.writeMetadata"
              @change="() => { saveSettings(); ElMessage.success('å…ƒæ•°æ®è®¾ç½®å·²ä¿å­˜'); }"
              size="large"
              class="switch-control"
            />
          </div>
        </div>

        <!-- ZIPæ‰“åŒ…ä¸‹è½½ -->
        <div class="setting-group">
          <div class="switch-card">
            <div class="switch-content">
              <div class="switch-header">
                <el-icon class="switch-icon"><FolderOpened /></el-icon>
                <div class="switch-info">
                  <div class="switch-title">
                    ZIPæ‰“åŒ…ä¸‹è½½
                    <el-tag size="small" type="info">ä»…é™å•æ›²</el-tag>
                  </div>
                  <div class="switch-desc">å°†éŸ³é¢‘æ–‡ä»¶å’Œæ­Œè¯æ–‡ä»¶æ‰“åŒ…æˆZIPæ ¼å¼ä¸‹è½½</div>
                </div>
              </div>
            </div>
            <el-switch
              v-model="settings.zipDownload"
              @change="() => { saveSettings(); ElMessage.success('ZIPæ‰“åŒ…è®¾ç½®å·²ä¿å­˜'); }"
              size="large"
              class="switch-control"
            />
          </div>
        </div>
      </div>
      
      <!-- è§£æè®¾ç½® -->
      <div class="setting-section">
        <div class="section-title">
          <el-icon><List /></el-icon>
          <span>è§£æé…ç½®</span>
        </div>
        
        <!-- å¾ªç¯è§£ææ¨¡å¼ -->
        <div class="setting-group">
          <div class="switch-card">
            <div class="switch-content">
              <div class="switch-header">
                <el-icon class="switch-icon"><Refresh /></el-icon>
                <div class="switch-info">
                  <div class="switch-title">
                    å¾ªç¯è§£ææ¨¡å¼
                    <el-tag size="small" type="warning">ä»…é™æ­Œå•</el-tag>
                  </div>
                  <div class="switch-desc">è¶…è¿‡200é¦–çš„æ­Œå•å¯ç”¨å¾ªç¯è§£ææ¨¡å¼ï¼Œé¿å…ä¸€æ¬¡æ€§è§£æè¿‡å¤šæ­Œæ›²å¯¼è‡´çš„æ€§èƒ½é—®é¢˜</div>
                </div>
              </div>
            </div>
            <el-switch
              v-model="settings.loopParseMode"
              @change="() => { saveSettings(); ElMessage.success('å¾ªç¯è§£æè®¾ç½®å·²ä¿å­˜'); }"
              size="large"
              class="switch-control"
            />
          </div>
          
          <!-- è§£ææ•°é‡è®¾ç½® -->
          <div class="switch-card" v-if="settings.loopParseMode">
            <div class="switch-content">
              <div class="switch-header">
                <el-icon class="switch-icon"><DocumentCopy /></el-icon>
                <div class="switch-info">
                  <div class="switch-title">
                    æ¯æ¬¡è§£ææ•°é‡
                    <el-tooltip content="å»ºè®®è®¾ç½®ä¸º20-30é¦–ï¼Œè¿‡å¤šå¯èƒ½å¯¼è‡´è§£æç¼“æ…¢" placement="top">
                      <el-icon class="help-icon"><QuestionFilled /></el-icon>
                    </el-tooltip>
                  </div>
                  <div class="switch-desc">è®¾ç½®æ¯æ‰¹æ¬¡è§£æçš„æ­Œæ›²æ•°é‡ï¼Œæ•°é‡è¶Šå°‘è§£æè¶Šç¨³å®š</div>
                </div>
              </div>
            </div>
            <el-select
               v-model="settings.loopParseLimit"
               @change="() => { saveSettings(); ElMessage.success('è§£ææ•°é‡è®¾ç½®å·²ä¿å­˜'); }"
               style="width: 100px;"
               size="large"
             >
               <el-option label="10é¦–" :value="10" />
               <el-option label="20é¦–" :value="20" />
               <el-option label="30é¦–" :value="30" />
               <el-option label="40é¦–" :value="40" />
               <el-option label="50é¦–" :value="50" />
             </el-select>
          </div>
        </div>
        

      </div>
    </div>

    <!-- ç§»é™¤åº•éƒ¨æŒ‰é’®ï¼Œç»Ÿä¸€ä½¿ç”¨å³ä¸Šè§’å®ŒæˆæŒ‰é’® -->
  </el-dialog>

  <!-- ç³»ç»Ÿå…¬å‘Šå¼¹çª— -->
  <el-dialog
    v-model="showWelcomeDialog"
    title="ç³»ç»Ÿå…¬å‘Š"
    width="500px"
    :close-on-click-modal="false"
    :close-on-press-escape="false"
    :show-close="false"
    center
    class="welcome-dialog"
  >
    <div class="welcome-content">
      <div class="welcome-icon">
        <el-icon :size="48" color="#409EFF">
          <InfoFilled />
        </el-icon>
      </div>
      <h3 class="welcome-title">æ¬¢è¿ä½¿ç”¨ç½‘æ˜“äº‘éŸ³ä¹è§£æç³»ç»Ÿï¼</h3>
      <div class="welcome-message">
        <p>å¦‚æœæ— æ³•ä¸‹è½½æˆ–ä¸‹è½½åæ‰¾ä¸åˆ°æ–‡ä»¶è¯·æ›´æ¢æµè§ˆå™¨ä¸‹è½½!</p>
      </div>
    </div>
    <template #footer>
       <div class="dialog-footer">
         <el-button type="primary" @click="handleWelcomeConfirm" size="large">
           æˆ‘çŸ¥é“äº†
         </el-button>
       </div>
     </template>
  </el-dialog>

  <!-- æ‚¬æµ®æŒ‰é’® -->
  <el-button
    class="floating-changelog-btn"
    type="primary"
    :icon="EditPen"
    circle
    size="large"
    @click="showChangelogDialog = true"
    title="æŸ¥çœ‹æ›´æ–°æ—¥å¿—"
  />

  <!-- èµåŠ©æŒ‰é’® -->
  <el-button
    class="floating-sponsor-btn"
    type="danger"
    circle
    size="large"
    @click="showSponsorDialog = true"
    title="èµåŠ©æ”¯æŒ"
  >
    â¤ï¸
  </el-button>

  <!-- æ›´æ–°æ—¥å¿—å¼¹çª— -->
  <Suspense>
    <template #default>
      <ChangelogModal v-model="showChangelogDialog" />
    </template>
    <template #fallback>
      <div></div>
    </template>
  </Suspense>

  <!-- èµåŠ©å¼¹çª— -->
  <Suspense>
    <template #default>
      <SponsorModal v-model="showSponsorDialog" />
    </template>
    <template #fallback>
      <div></div>
    </template>
  </Suspense>

</template>

<style scoped>
/* CSSå˜é‡å®šä¹‰ - ä»style.cssé€‚é… */
:root {
  --el-color-primary: #409eff;
  --el-color-primary-light-3: #79bbff;
  --el-color-primary-light-5: #a0cfff;
  --el-color-primary-light-7: #c6e2ff;
  --el-color-primary-light-8: #d9ecff;
  --el-color-primary-light-9: #ecf5ff;
  --el-color-primary-dark-2: #337ecc;
  --el-color-success: #67c23a;
  --el-color-warning: #e6a23c;
  --el-color-danger: #f56c6c;
  --el-color-info: #909399;
  --el-bg-color: #fff;
  --el-bg-color-page: #f2f3f5;
  --el-text-color-primary: #303133;
  --el-text-color-regular: #606266;
  --el-text-color-secondary: #909399;
  --el-text-color-placeholder: #a8abb2;
  --el-border-color: #dcdfe6;
  --el-border-color-light: #e4e7ed;
  --el-border-color-lighter: #ebeef5;
  --el-fill-color-blank: #fff;
  --el-fill-color-light: #f5f7fa;
  --el-box-shadow: 0px 12px 32px 4px rgba(0,0,0,.04), 0px 8px 20px rgba(0,0,0,.08);
  --el-box-shadow-light: 0px 0px 12px rgba(0,0,0,.12);
  --el-transition-duration: .3s;
  --el-border-radius-base: 4px;
  --el-font-size-base: 14px;
  --el-font-size-large: 18px;
  --el-font-weight-primary: 500;
}

/* æ·±è‰²æ¨¡å¼å˜é‡ */
.dark {
  --el-bg-color: #141414;
  --el-bg-color-page: #0a0a0a;
  --el-text-color-primary: #e5eaf3;
  --el-text-color-regular: #cfd3dc;
  --el-text-color-secondary: #a3a6ad;
  --el-border-color: #4c4d4f;
  --el-border-color-light: #414243;
  --el-border-color-lighter: #363637;
  --el-fill-color-blank: #141414;
  --el-fill-color-light: #1d1e1f;
  --el-fill-color: #262727;
  --el-fill-color-darker: #1a1a1a;
  --el-color-primary-light-9: #1a1a2e;
  --el-color-primary: #409eff;
}

/* åº”ç”¨å®¹å™¨ */
.app-container {
  min-height: 100vh;
  background: var(--el-bg-color-page);
  flex-direction: column;
  color: var(--el-text-color-primary);
  transition: all var(--el-transition-duration) ease;
}

/* é¡¶éƒ¨å¯¼èˆªæ æ ·å¼ */
.app-header {
  height: 64px;
  background: var(--el-bg-color);
  border-bottom: 1px solid var(--el-border-color-light);
  box-shadow: var(--el-box-shadow-light);
  position: sticky;
  top: 0;
  z-index: 1000;
  transition: all var(--el-transition-duration) ease;
}

.header-content {
  width: 100%;
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 24px;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.header-left {
  display: flex;
  align-items: center;
}

.logo {
  display: flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
  transition: all var(--el-transition-duration) ease;
}

.logo:hover {
  transform: translateY(-1px);
}

.logo-icon {
  color: var(--el-color-primary);
  transition: all var(--el-transition-duration) ease;
}

.logo:hover .logo-icon {
  color: var(--el-color-primary-light-3);
  transform: rotate(5deg);
}

.logo-text {
  font-size: 20px;
  font-weight: 700;
  color: var(--el-text-color-primary);
  background: linear-gradient(135deg, var(--el-color-primary), var(--el-color-primary-light-3));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  transition: all var(--el-transition-duration) ease;
}

.header-right {
  display: flex;
  align-items: center;
  gap: 16px;
}

.settings-btn {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--el-fill-color-light);
  border: 1px solid var(--el-border-color-lighter);
  color: var(--el-text-color-regular);
  transition: all var(--el-transition-duration) ease;
}

.settings-btn:hover {
  background: var(--el-color-primary-light-9);
  border-color: var(--el-color-primary-light-5);
  color: var(--el-color-primary);
  transform: translateY(-2px) rotate(90deg);
  box-shadow: var(--el-box-shadow);
}

.header-right .el-button {
  transition: all 0.3s ease;
}

.header-right .el-button:hover {
  transform: translateY(-1px);
  box-shadow: var(--el-box-shadow);
}

/* ä¸»è¦å†…å®¹ */
.main-container {
  max-width: 1200px;
  margin: 0 auto;
}

.app-main {
  padding: 20px;
}

/* é¡µé¢æ ‡é¢˜ */
.page-header {
  text-align: center;
  margin-bottom: 30px;
}

.page-title {
  font-size: 32px;
  font-weight: 700;
  color: var(--el-text-color-primary);
  margin: 0 0 10px 0;
}

.page-description {
  font-size: 16px;
  color: var(--el-text-color-regular);
  margin: 0;
}

/* å¡ç‰‡å¼åˆ‡æ¢å™¨æ ·å¼ */
.view-switcher-container {
  margin-bottom: 30px;
}

.switcher-cards {
  display: flex;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap;
}

.switcher-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 140px;
  height: 120px;
  padding: 20px;
  background: var(--el-fill-color-blank);
  border: 2px solid var(--el-border-color-lighter);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.switcher-card:hover {
  border-color: var(--el-color-primary-light-5);
  box-shadow: 0 4px 16px rgba(64, 158, 255, 0.2);
  transform: translateY(-2px);
}

.switcher-card.active {
  border-color: var(--el-color-primary);
  background: var(--el-color-primary-light-9);
  box-shadow: 0 4px 16px rgba(64, 158, 255, 0.3);
}

.card-icon {
  margin-bottom: 12px;
  color: var(--el-text-color-secondary);
  transition: color 0.3s ease;
}

.switcher-card:hover .card-icon,
.switcher-card.active .card-icon {
  color: var(--el-color-primary);
}

.card-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--el-text-color-primary);
  text-align: center;
  line-height: 1.4;
}



/* å¡ç‰‡æ ·å¼ */
.input-card {
  margin-bottom: 20px;
  border-radius: var(--el-border-radius-base);
  box-shadow: var(--el-box-shadow-light);
  transition: all var(--el-transition-duration) ease;
}

.input-card:hover {
  box-shadow: var(--el-box-shadow);
  transform: translateY(-2px);
}

.card-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
}

/* å¸®åŠ©åŒºåŸŸ */
.help-section {
  margin-bottom: 20px;
}

.examples-section,
.formats-section {
  margin-bottom: 16px;
}

.examples-section:last-child,
.formats-section:last-child {
  margin-bottom: 0;
}

.section-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--el-text-color-primary);
  margin: 0 0 16px 0;
}

.example-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.example-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
  border: 1px solid var(--el-border-color-lighter);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s;
}

.example-item:hover {
  border-color: var(--el-color-primary);
  background-color: var(--el-color-primary-light-9);
}

.example-info {
  flex: 1;
}

.example-name {
  font-weight: 600;
  color: var(--el-text-color-primary);
  margin-bottom: 4px;
}

.example-artist {
  font-size: 14px;
  color: var(--el-text-color-regular);
}

.format-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.format-item {
  font-family: 'Courier New', monospace;
  font-size: 13px;
  align-self: flex-start;
}

/* æ’­æ”¾å™¨åŒºåŸŸ */
.player-section {
  margin-bottom: 20px;
}

/* è§†å›¾åˆ‡æ¢æ ‡ç­¾æ ·å¼ */
.view-tabs {
  margin-bottom: 24px;
}

.view-tabs .el-tabs__header {
  margin: 0 0 20px 0;
}

.view-tabs .el-tabs__nav-wrap::after {
  height: 1px;
  background-color: var(--el-border-color-light);
}

.view-tabs .el-tabs__item {
  padding: 0 20px;
  height: 48px;
  line-height: 48px;
  font-size: 16px;
  font-weight: 500;
  color: var(--el-text-color-regular);
  transition: all 0.3s ease;
}

.view-tabs .el-tabs__item:hover {
  color: var(--el-color-primary);
}

.view-tabs .el-tabs__item.is-active {
  color: var(--el-color-primary);
  font-weight: 600;
}

.view-tabs .el-tabs__active-bar {
  height: 3px;
  background-color: var(--el-color-primary);
  border-radius: 2px;
}

.tab-label {
  display: flex;
  align-items: center;
  gap: 8px;
}

.tab-label .el-icon {
  font-size: 18px;
}

/* æ­Œå•è§£æåŒºåŸŸæ ·å¼ */
.playlist-section {
  margin-top: 24px;
}

.disclaimer-card {
  margin-top: 20px;
}

.disclaimer-card .el-alert {
  border-radius: 8px;
}

.author-card {
  margin-bottom: 20px;
}

.author-info p {
  margin: 0 0 12px 0;
  font-size: 14px;
  color: var(--el-text-color-regular);
  line-height: 1.7;
}

.author-info p:last-child {
  margin-bottom: 0;
}

/* è®¾ç½®åŒºåŸŸæ ·å¼ */
.settings-card {
  margin-top: 24px;
  border-radius: 12px;
  overflow: hidden;
}

.card-header {
  display: flex;
  align-items: center;
  gap: 12px;
}

.header-icon {
  font-size: 20px;
  color: var(--el-color-primary);
}

.header-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--el-text-color-primary);
}

.settings-content {
  padding: 20px;
}

/* è®¾ç½®åŒºå—æ ·å¼ */
.setting-section {
  margin-bottom: 32px;
}

.setting-section:last-child {
  margin-bottom: 0;
}

.section-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 16px;
  font-weight: 600;
  color: var(--el-text-color-primary);
  margin-bottom: 16px;
}

.section-title .el-icon {
  font-size: 18px;
  color: var(--el-color-primary);
}

/* ä¸»é¢˜é€‰é¡¹æ ·å¼ */
.theme-options {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.theme-option {
  display: flex;
  /*flex-direction: column;*/
  align-items: center;
  justify-content: center;
  padding: 0px 6px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  background: var(--el-bg-color);
  text-align: center;
  aspect-ratio: 1;
  min-height: 120px;
}

.theme-option:hover {
  border-color: var(--el-color-primary-light-5);
  background: var(--el-color-primary-light-9);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.theme-option.active {
  border-color: var(--el-color-primary);
  background: var(--el-color-primary-light-9);
  box-shadow: 0 0 0 1px var(--el-color-primary-light-7);
}

.option-icon {
  font-size: 32px;
  color: var(--el-color-primary);
  margin-bottom: 12px;
  flex-shrink: 0;
}

.option-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.option-label {
  font-size: 15px;
  font-weight: 600;
  color: var(--el-text-color-primary);
  margin-bottom: 4px;
}

.option-desc {
  font-size: 12px;
  color: var(--el-text-color-secondary);
  line-height: 1.3;
}

/* è®¾ç½®ç»„æ ·å¼ */
.setting-group {
  margin-bottom: 20px;
}

.setting-group:last-child {
  margin-bottom: 0;
}

.group-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--el-text-color-primary);
  margin-bottom: 12px;
}

/* æ–‡ä»¶å‘½åé€‰é¡¹ */
.filename-options {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.filename-option {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  border: 2px solid var(--el-border-color-light);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.3s ease;
  background: var(--el-bg-color);
}

.filename-option:hover {
  border-color: var(--el-color-primary-light-5);
  background: var(--el-color-primary-light-9);
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.filename-option.active {
  border-color: var(--el-color-primary);
  background: var(--el-color-primary-light-9);
  box-shadow: 0 0 0 1px var(--el-color-primary-light-7);
}

.option-content {
  flex: 1;
}

.option-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.option-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--el-text-color-primary);
}

.option-example {
  font-size: 12px;
  color: var(--el-text-color-secondary);
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
}

.option-indicator {
  display: flex;
  align-items: center;
}

.radio-dot {
  width: 16px;
  height: 16px;
  border: 2px solid var(--el-border-color);
  border-radius: 50%;
  position: relative;
  transition: all 0.3s ease;
}

.radio-dot::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 6px;
  height: 6px;
  background: var(--el-color-primary);
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(0);
  transition: transform 0.3s ease;
}

.filename-option.active .radio-dot {
  border-color: var(--el-color-primary);
}

.filename-option.active .radio-dot::after {
  transform: translate(-50%, -50%) scale(1);
}

/* å¼€å…³å¡ç‰‡æ ·å¼ */
.switch-card {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  border: 2px solid var(--el-border-color-light);
  border-radius: 10px;
  background: var(--el-bg-color);
  transition: all 0.3s ease;
  margin-bottom: 12px;
}

.switch-card:last-child {
  margin-bottom: 0;
}

.switch-card:hover {
  border-color: var(--el-color-primary-light-5);
  background: var(--el-color-primary-light-9);
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.switch-content {
  flex: 1;
  margin-right: 16px;
}

.switch-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.switch-icon {
  font-size: 18px;
  color: var(--el-color-primary);
  margin-top: 2px;
  flex-shrink: 0;
}

.switch-info {
  flex: 1;
}

.switch-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 15px;
  font-weight: 500;
  color: var(--el-text-color-primary);
  margin-bottom: 4px;
}

.switch-desc {
  font-size: 13px !important;
  color: var(--el-text-color-secondary) !important;
  line-height: 1.4 !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.switch-control {
  flex-shrink: 0;
}

/* æ“ä½œæŒ‰é’®åŒºåŸŸ */
.action-section {
  padding-top: 24px;
  border-top: 1px solid var(--el-border-color-lighter);
  margin-top: 24px;
}

.button-group {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
}

.reset-btn,
.save-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 12px 24px;
  border-radius: 8px;
  font-weight: 500;
  min-height: 44px;
  transition: all 0.3s ease;
}

.reset-btn:hover,
.save-btn:hover {
  transform: translateY(-1px);
}

.btn-text {
  white-space: nowrap;
}

/* æ‰‹æœºç«¯è®¾ç½®å¼¹çª—æ ·å¼ */
.settings-dialog {
  --el-dialog-margin-top: 0;
}

/* æ‰‹æœºç«¯é¡¶éƒ¨æ  */
.mobile-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  background: var(--el-bg-color);
  border-bottom: 1px solid var(--el-border-color-light);
  position: sticky;
  top: 0;
  z-index: 10;
}

.mobile-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--el-text-color-primary);
}

.mobile-done-btn {
  min-width: 80px;
  height: 36px;
  border-radius: 18px;
  font-weight: 500;
}

/* æ‰‹æœºç«¯å¼¹çª—å…¨å±æ ·å¼ */
@media (max-width: 768px) {
  .settings-dialog .el-dialog {
    margin: 0 !important;
    width: 100% !important;
    height: 100% !important;
    max-width: 100% !important;
    border-radius: 0 !important;
  }
  
  .settings-dialog .el-dialog__body {
    padding: 0 !important;
    height: calc(100vh - 70px);
    overflow-y: auto;
  }
  
  .settings-dialog .el-dialog__header {
    padding: 0 !important;
    margin: 0 !important;
  }
  
  .settings-dialog .el-dialog__footer {
    display: none !important;
  }
  
  .settings-content {
    padding: 20px !important;
    min-height: calc(100vh - 70px);
  }
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .settings-content {
    padding: 16px;
  }
  
  .theme-options {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  .theme-option {
    display: flex;
    flex-direction: row;
    align-items: center;
    text-align: left;
    padding: 16px;
    min-height: 60px;
    border-radius: 12px;
    aspect-ratio: unset;
  }
  
  .theme-option:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
  }
  
  .option-icon {
    font-size: 20px;
    margin-bottom: 0;
    margin-right: 12px;
    flex-shrink: 0;
  }
  
  .option-content {
    display: block;
    text-align: left;
  }
  
  .option-label {
    font-size: 16px;
    margin-bottom: 2px;
  }
  
  .option-desc {
    font-size: 14px;
  }
  
  .switch-card {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
    padding: 16px;
    min-height: 60px;
    border-radius: 12px;
  }
  
  .switch-card:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
  }
  
  .switch-content {
    margin-right: 0;
    width: 100%;
  }
  
  .switch-header {
    gap: 8px;
  }
  
  .filename-option {
    padding: 16px;
    min-height: 60px;
    border-radius: 12px;
  }
  
  .filename-option:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
  }
  
  .button-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
  
  .reset-btn,
  .save-btn {
    width: 100%;
    justify-content: center;
    min-height: 44px;
    font-size: 14px;
    padding: 12px 16px;
  }
}

@media (max-width: 480px) {
  /* å¡ç‰‡åˆ‡æ¢å™¨ç§»åŠ¨ç«¯é€‚é… */
  .switcher-cards {
    gap: 12px;
  }
  
  .switcher-card {
    width: 100px;
    height: 100px;
    padding: 16px;
  }
  
  .card-icon {
    margin-bottom: 8px;
  }
  
  .card-icon .el-icon {
    font-size: 20px !important;
  }
  
  .card-title {
    font-size: 12px;
  }
  

  
  .settings-content {
    padding: 12px;
  }
  
  .section-title {
    font-size: 15px;
  }
  
  .theme-option {
    padding: 10px 12px;
  }
  
  .option-label {
    font-size: 13px;
  }
  
  .option-desc {
    font-size: 11px;
  }
  
  .item-label {
    font-size: 14px;
  }
  
  .item-desc {
    font-size: 12px;
  }
  
  .filename-option {
    padding: 10px 12px;
  }
  
  .option-title {
    font-size: 13px;
  }
  
  .option-example {
    font-size: 11px;
  }
  
  .switch-card {
    padding: 10px 12px;
  }
  
  .switch-title {
    font-size: 14px;
  }
  
  .switch-desc {
    font-size: 12px;
  }
  
  .switch-icon {
    font-size: 16px;
  }
  
  .button-group {
    gap: 8px;
  }
  
  .reset-btn,
  .save-btn {
    padding: 12px 14px;
    font-size: 13px;
    min-height: 40px;
    border-radius: 8px;
  }
  
  .btn-text {
    font-size: 13px;
    font-weight: 500;
  }
}

/* åº•éƒ¨ */
.app-footer {
  background-color: var(--el-bg-color);
  border-top: 1px solid var(--el-border-color);
  padding: 30px 20px 20px;
  margin-top: 40px;
}

.footer-content {
  max-width: 1200px;
  margin: 0 auto;
}

.footer-info {
  text-align: center;
}

.footer-links {
  margin-bottom: 20px;
}

.footer-links .el-link {
  color: var(--el-text-color-regular);
  font-weight: 500;
  transition: all 0.3s;
}

.footer-links .el-link:hover {
  color: var(--el-color-primary);
  transform: translateY(-1px);
}

.footer-links .el-icon {
  margin-right: 4px;
}

.footer-text {
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
}

.tech-stack {
  display: flex;
  gap: 8px;
  justify-content: center;
  flex-wrap: wrap;
}

.copyright {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  font-size: 14px;
  color: var(--el-text-color-regular);
  font-weight: 500;
}

.build-info {
  opacity: 0.8;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 1024px) {
  .header-content {
    padding: 0 20px;
  }
  
  .logo-text {
    font-size: 18px;
  }
}

@media (max-width: 768px) {
  .app-header {
    height: 56px;
  }
  
  .header-content {
    padding: 0 16px;
  }
  
  .logo {
    gap: 10px;
  }
  
  .logo-text {
    font-size: 16px;
  }
  
  .header-right .el-button {
    width: 40px;
    height: 40px;
  }
  
  .app-main {
    padding: 16px;
  }
  
  .page-title {
    font-size: 24px;
  }
  
  .page-description {
    font-size: 14px;
  }
  
  .help-section .el-col {
    margin-bottom: 20px;
  }
  
  /* è¾“å…¥è¡¨å•ç§»åŠ¨ç«¯ä¼˜åŒ– */
  .input-card .el-form-item {
    margin-bottom: 20px;
  }
  
  .input-card .el-input {
    font-size: 16px;
  }
  
  .input-card .el-input__inner {
    height: 44px;
    font-size: 16px;
  }
  
  .input-card .el-select {
    width: 100% !important;
  }
  
  .input-card .el-select .el-input__inner {
    height: 44px;
    font-size: 16px;
  }
  
  .input-card .el-button {
    height: 44px;
    font-size: 16px;
    min-width: 120px;
  }
  
  .input-card .el-form-item__label {
    font-size: 15px;
    font-weight: 500;
  }
  
  /* è®¾ç½®åŒºåŸŸæ‰‹æœºç«¯é€‚é… */
  .settings-container {
    padding: 16px;
  }
  
  .header-icon-wrapper {
    width: 40px;
    height: 40px;
  }
  
  .header-icon {
    font-size: 20px;
  }
  
  .header-title {
    font-size: 18px;
  }
  
  .header-subtitle {
    font-size: 13px;
  }
  
  .section-header {
    gap: 12px;
    margin-bottom: 16px;
  }
  
  .section-icon {
    width: 36px;
    height: 36px;
    font-size: 18px;
  }
  
  .section-title {
    font-size: 16px;
  }
  
  .section-description {
    font-size: 13px;
  }
  
  .theme-options {
    grid-template-columns: 1fr;
    gap: 12px;
  }
  
  .theme-option {
    padding: 16px;
  }
  
  .option-icon {
    width: 40px;
    height: 40px;
    font-size: 20px;
    margin-bottom: 10px;
  }
  
  .option-label {
    font-size: 15px;
  }
  
  .option-desc {
    font-size: 12px;
  }
  
  .filename-option {
    padding: 14px 16px;
  }
  
  .filename-option .option-label {
    font-size: 14px;
  }
  
  .option-example {
    font-size: 12px;
  }
  
  .switch-setting {
    padding: 16px;
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }
  
  .switch-info {
    margin-right: 0;
    width: 100%;
  }
  
  .switch-label {
    font-size: 15px;
  }
  
  .switch-desc {
    font-size: 12px;
  }
  
  .custom-switch {
    align-self: flex-end;
  }
  
  .action-section {
    flex-direction: column;
    gap: 12px;
  }
  
  .reset-button,
  .save-button {
    width: 100%;
    min-width: auto;
    height: 48px;
  }
  
  .app-footer {
    padding: 20px 16px 16px;
  }
  
  .footer-links {
    margin-bottom: 16px;
  }
  
  .footer-links .el-space {
    justify-content: center;
    flex-wrap: wrap;
  }
  
  .footer-links .el-link {
    font-size: 14px;
    padding: 8px 12px;
    border-radius: 6px;
    background-color: var(--el-fill-color-light);
    transition: all 0.3s;
  }
  
  .footer-links .el-link:hover {
    background-color: var(--el-color-primary-light-9);
  }
  
  .tech-stack {
    gap: 6px;
    justify-content: center;
  }
  
  .tech-stack .el-tag {
    margin: 2px;
  }
  
  .footer-text {
    gap: 12px;
  }
  
  .copyright {
    font-size: 13px;
    line-height: 1.4;
  }
  
  .build-info {
    font-size: 12px;
  }
}

@media (max-width: 480px) {
  .logo-text {
    display: none;
  }
  
  .app-main {
    padding: 12px;
  }
  
  .page-header {
    margin-bottom: 20px;
  }
  
  .page-title {
    font-size: 20px;
  }
  
  .page-description {
    font-size: 13px;
  }
  
  /* è¾“å…¥è¡¨å•å°å±å¹•ä¼˜åŒ– */
  .input-card {
    margin-bottom: 16px;
  }
  
  .input-card .el-form-item {
    margin-bottom: 16px;
  }
  
  .input-card .el-form-item__label {
    font-size: 14px;
    margin-bottom: 8px;
  }
  
  .input-card .el-input__inner,
  .input-card .el-select .el-input__inner {
    height: 40px;
    font-size: 15px;
  }
  
  .input-card .el-button {
    height: 40px;
    font-size: 15px;
    min-width: 100px;
    margin-right: 8px;
    margin-bottom: 8px;
  }
  
  /* æŒ‰é’®ç»„ç§»åŠ¨ç«¯å¸ƒå±€ */
  .input-card .el-form-item:last-child {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  .input-card .el-form-item:last-child .el-button {
     width: 100%;
     margin-right: 0;
   }
   
   /* å¡ç‰‡ç§»åŠ¨ç«¯ä¼˜åŒ– */
   .el-card {
     border-radius: 12px;
     box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.08);
   }
   
   .el-card .el-card__header {
     padding: 16px;
   }
   
   .el-card .el-card__body {
     padding: 16px;
   }
   
   .card-header {
     font-size: 16px;
     font-weight: 600;
   }
   
   /* å¸®åŠ©åŒºåŸŸç§»åŠ¨ç«¯ä¼˜åŒ– */
   .help-section .el-card {
     margin-bottom: 16px;
   }
   
   .examples-section {
     display: flex;
     flex-direction: column;
     gap: 12px;
   }
   
   .example-item {
     padding: 12px;
     background: var(--el-fill-color-lighter);
     border-radius: 8px;
     font-size: 14px;
   }
   
   /* è®¾ç½®åŒºåŸŸè¶…å°å±å¹•é€‚é… */
  .settings-container {
    padding: 12px;
  }
  
  .card-header {
    gap: 12px;
  }
  
  .header-icon-wrapper {
    width: 36px;
    height: 36px;
  }
  
  .header-icon {
    font-size: 18px;
  }
  
  .header-title {
    font-size: 16px;
  }
  
  .header-subtitle {
    font-size: 12px;
  }
  
  .section-header {
    gap: 10px;
    margin-bottom: 14px;
  }
  
  .section-icon {
    width: 32px;
    height: 32px;
    font-size: 16px;
  }
  
  .section-title {
    font-size: 15px;
  }
  
  .section-description {
    font-size: 12px;
  }
  
  .theme-option {
    padding: 12px;
  }
  
  .option-icon {
    width: 36px;
    height: 36px;
    font-size: 18px;
    margin-bottom: 8px;
  }
  
  .option-label {
    font-size: 14px;
  }
  
  .option-desc {
    font-size: 11px;
  }
  
  .group-label {
    font-size: 15px;
  }
  
  .label-icon {
    font-size: 16px;
  }
  
  .filename-option {
    padding: 12px 14px;
  }
  
  .filename-option .option-label {
    font-size: 13px;
  }
  
  .option-example {
    font-size: 11px;
  }
  
  .switch-setting {
    padding: 14px;
  }
  
  .switch-label {
    font-size: 14px;
  }
  
  .switch-desc {
    font-size: 11px;
  }
  
  .switch-icon {
    font-size: 14px;
  }
  
  .reset-button,
  .save-button {
    height: 44px;
    font-size: 14px;
  }
  
  .btn-icon {
    font-size: 14px;
  }
  
  .footer-links .el-space {
    flex-direction: column;
    align-items: center;
    gap: 8px;
  }
  
  .footer-links .el-link {
    width: 200px;
    text-align: center;
    justify-content: center;
    font-size: 13px;
    padding: 10px 16px;
  }
  
  .tech-stack {
    flex-wrap: wrap;
    justify-content: center;
    gap: 4px;
    max-width: 280px;
    margin: 0 auto;
  }
  
  .tech-stack .el-tag {
    margin: 2px;
    font-size: 11px;
  }
  
  .copyright {
    flex-direction: column;
    gap: 6px;
    text-align: center;
    font-size: 12px;
    line-height: 1.5;
  }
  
  .build-info {
    font-size: 11px;
    text-align: center;
  }
  
  .footer-text {
    gap: 8px;
  }
}

/* è§¦æ‘¸ä¼˜åŒ– */
@media (hover: none) and (pointer: coarse) {
  .theme-option,
  .filename-option {
    min-height: 64px;
  }
  
  .switch-card {
    min-height: 64px;
  }
  
  .mobile-done-btn {
    min-height: 44px;
    min-width: 88px;
  }
  
  .option-icon {
    min-width: 44px;
    min-height: 44px;
  }
  
  /* å¢å¼ºè§¦æ‘¸åé¦ˆ */
  .theme-option:active,
  .filename-option:active,
  .switch-card:active {
    transform: scale(0.97);
    background-color: var(--el-color-primary-light-8);
  }
  
  .mobile-done-btn:active {
    transform: scale(0.95);
  }
}

/* æ‰‹æœºç«¯ä¸“ç”¨äº¤äº’ä¼˜åŒ– */
@media (max-width: 768px) {
  /* å¢åŠ æ‰€æœ‰å¯ç‚¹å‡»å…ƒç´ çš„è§¦æ‘¸åŒºåŸŸ */
  .theme-option,
  .filename-option,
  .switch-card {
    position: relative;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
  }
  
  /* ä¼˜åŒ–å¼€å…³æ§ä»¶ */
  .switch-card .el-switch {
    transform: scale(1.2);
  }
  
  /* ä¼˜åŒ–å•é€‰æŒ‰é’® */
  .radio-dot {
    width: 20px;
    height: 20px;
    border-width: 3px;
  }
  
  .radio-dot::after {
    width: 8px;
    height: 8px;
  }
  
  /* ç§»åŠ¨ç«¯æ»šåŠ¨ä¼˜åŒ– */
  .settings-content {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }
  
  /* ç§»åŠ¨ç«¯å­—ä½“ä¼˜åŒ– */
  .option-label,
  .switch-title {
    font-size: 16px;
    line-height: 1.4;
  }
  
  .option-desc,
  .switch-desc {
    font-size: 14px;
    line-height: 1.3;
  }
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.dark .settings-card {
  background-color: var(--el-bg-color);
  border-color: var(--el-border-color);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

.dark .header-icon-wrapper {
  background: linear-gradient(135deg, var(--el-color-primary-dark-2), var(--el-color-primary));
  box-shadow: 0 4px 12px rgba(64, 158, 255, 0.4);
}

.dark .section-icon {
  background-color: var(--el-color-primary-light-8);
  color: var(--el-color-primary-light-3);
}

.dark .theme-option,
.dark .filename-option {
  background-color: var(--el-fill-color-blank);
  border-color: var(--el-border-color);
}

.dark .theme-option:hover,
.dark .filename-option:hover {
  border-color: var(--el-color-primary-light-5);
  background-color: var(--el-color-primary-light-9);
}

.dark .theme-option.active,
.dark .filename-option.active {
  border-color: var(--el-color-primary);
  background-color: var(--el-color-primary-light-9);
}

.dark .option-icon {
  color: var(--el-color-primary-light-3);
  background-color: transparent;
}

.dark .themer.switch-setting:hover {
  border-color: var(--el-color-primary-light-5);
  background-color: var(--el-color-primary-light-9);
}
/* æ·±è‰²æ¨¡å¼ä¸‹çš„é¡¶éƒ¨å¯¼èˆªæ  */
.dark .app-header {
  background: var(--el-bg-color);
  border-bottom-color: var(--el-border-color);
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);
}

.dark .logo-text {
  background: linear-gradient(135deg, var(--el-color-primary-light-3), var(--el-color-primary-light-5));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.dark .settings-btn {
  background: var(--el-fill-color-light);
  border-color: var(--el-border-color);
  color: var(--el-text-color-regular);
}

.dark .settings-btn:hover {
  background: var(--el-color-primary-light-9);
  border-color: var(--el-color-primary-light-5);
  color: var(--el-color-primary-light-3);
  box-shadow: 0 4px 12px rgba(64, 158, 255, 0.3);
}

.dark .save-button:hover {
  background: linear-gradient(135deg, var(--el-color-primary-dark-2), var(--el-color-primary));
  box-shadow: 0 6px 20px rgba(64, 158, 255, 0.5);
}

.dark .section-divider {
  background: linear-gradient(90deg, transparent, var(--el-border-color), transparent);
}

/* åŠ¨ç”»æ•ˆæœ */
@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.setting-section {
  animation: slideInUp 0.6s ease-out;
}

.setting-section:nth-child(2) {
  animation-delay: 0.1s;
}

.setting-section:nth-child(3) {
  animation-delay: 0.2s;
}

.setting-section:nth-child(4) {
  animation-delay: 0.3s;
}

/* æ·±è‰²æ¨¡å¼åˆ‡æ¢åŠ¨ç”» */
* {
  transition: background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ä¸»è¦å®¹å™¨çš„è¿‡æ¸¡åŠ¨ç”» */
.app-container,
.app-header,
.app-main,
.input-card,
.result-card,
.settings-dialog {
  transition: background-color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
              border-color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Element Plus ç»„ä»¶çš„è¿‡æ¸¡åŠ¨ç”» */
.el-card,
.el-button,
.el-input,
.el-select,
.el-radio,
.el-switch,
.el-dialog,
.el-message,
.el-notification {
  transition: background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* ä¸»é¢˜åˆ‡æ¢æ—¶çš„ç‰¹æ®ŠåŠ¨ç”»æ•ˆæœ */
.theme-switching {
  position: relative;
  overflow: hidden;
}

.theme-switching::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle at center, 
    var(--el-color-primary-light-9) 0%, 
    transparent 70%);
  opacity: 0;
  pointer-events: none;
  z-index: 9999;
  animation: themeRipple 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes themeRipple {
  0% {
    opacity: 0;
    transform: scale(0);
  }
  50% {
    opacity: 0.3;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(1.2);
  }
}

/* ä¸»é¢˜é€‰é¡¹çš„åŠ¨ç”»å¢å¼º */
.theme-option {
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}
.theme-option:hover {
  transform: translateY(-1px);
  box-shadow: var(--el-box-shadow);
}

.theme-option.active {
  border-color: var(--el-color-primary);
  background-color: var(--el-color-primary-light-9);
}

.welcome-dialog .el-dialog {
  width: 400px;
  margin: 0 auto;
}

.welcome-content {
  padding: 24px 0;
  text-align: center;
}

.welcome-icon {
  margin-bottom: 10px;
}

.welcome-message p {
  margin: 0;
  padding: 12px 20px;
  background: var(--el-color-warning-light-9);
  border: 1px solid var(--el-color-warning-light-7);
  border-radius: 8px;
  color: var(--el-color-warning-dark-2);
}

.dialog-footer {
  text-align: center;
}

/* æ¬¢è¿å¼¹çª—ç§»åŠ¨ç«¯é€‚é… */
@media (max-width: 768px) {
  .welcome-dialog .el-dialog {
    width: 90% !important;
    margin: 0 auto !important;
    border-radius: 12px !important;
  }
  
  .welcome-content {
    padding: 16px 0;
  }
  
  .welcome-icon {
    margin-bottom: 16px;
  }
  
  .welcome-title {
    font-size: 18px;
    margin: 0 0 16px 0;
  }
  
  .welcome-message {
    font-size: 15px;
    margin-bottom: 8px;
  }
  
  .welcome-message p {
    padding: 10px 16px;
    font-size: 14px;
    line-height: 1.5;
  }
  
  .dialog-footer .el-button {
    width: 120px;
    height: 44px;
    font-size: 16px;
  }
}

@media (max-width: 480px) {
  .welcome-dialog .el-dialog {
    width: 95% !important;
    margin: 0 auto !important;
  }
  
  .welcome-content {
    padding: 12px 0;
  }
  
  .welcome-icon {
    margin-bottom: 12px;
  }
  
  .welcome-icon .el-icon {
    font-size: 40px !important;
  }
  
  .welcome-title {
    font-size: 16px;
    margin: 0 0 12px 0;
  }
  
  .welcome-message {
    font-size: 14px;
  }
  
  .welcome-message p {
    padding: 8px 12px;
    font-size: 13px;
  }
  
  .dialog-footer .el-button {
    width: 100px;
    height: 40px;
    font-size: 14px;
  }
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-10px);
  }
  60% {
    transform: translateY(-5px);
  }
}

/* æ‚¬æµ®æŒ‰é’®æ ·å¼ - ä½¿ç”¨Element Plusæ ‡å‡†æ ·å¼ */
.floating-changelog-btn {
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: 1000;
  width: 56px;
  height: 56px;
  /* ä½¿ç”¨Element Plusçš„é˜´å½±å’Œè¿‡æ¸¡æ•ˆæœ */
  box-shadow: var(--el-box-shadow-light);
  transition: var(--el-transition-all);
}

.floating-changelog-btn:hover {
  /* ä½¿ç”¨Element Plusçš„hoveræ•ˆæœ */
  transform: translateY(-2px);
  box-shadow: var(--el-box-shadow);
}

.floating-changelog-btn:active {
  /* ä½¿ç”¨Element Plusçš„activeæ•ˆæœ */
  transform: translateY(0);
}

/* ç§»åŠ¨ç«¯æ‚¬æµ®æŒ‰é’®é€‚é… */
@media (max-width: 768px) {
  .floating-changelog-btn {
    bottom: 20px;
    right: 20px;
    width: 48px;
    height: 48px;
  }
}

@media (max-width: 480px) {
  .floating-changelog-btn {
    bottom: 16px;
    right: 16px;
    width: 44px;
    height: 44px;
  }
}

/* èµåŠ©æŒ‰é’®æ ·å¼ - ä½¿ç”¨Element Plusæ ‡å‡†æ ·å¼ */
.floating-sponsor-btn {
  position: fixed;
  bottom: 24px;
  right: 96px; /* é¿å…ä¸æ›´æ–°æ—¥å¿—æŒ‰é’®é‡å  */
  z-index: 1000;
  width: 56px;
  height: 56px;
  font-size: 20px;
  /* ä½¿ç”¨Element Plusçš„é˜´å½±å’Œè¿‡æ¸¡æ•ˆæœ */
  box-shadow: var(--el-box-shadow-light);
  transition: var(--el-transition-all);
}

.floating-sponsor-btn:hover {
  /* ä½¿ç”¨Element Plusçš„hoveræ•ˆæœ */
  transform: translateY(-2px);
  box-shadow: var(--el-box-shadow);
}

.floating-sponsor-btn:active {
  /* ä½¿ç”¨Element Plusçš„activeæ•ˆæœ */
  transform: translateY(0);
}

/* ç§»åŠ¨ç«¯èµåŠ©æŒ‰é’®é€‚é… */
@media (max-width: 768px) {
  .floating-sponsor-btn {
    bottom: 20px;
    right: 80px;
    width: 48px;
    height: 48px;
    font-size: 18px;
  }
}

@media (max-width: 480px) {
  .floating-sponsor-btn {
    bottom: 16px;
    right: 72px;
    width: 44px;
    height: 44px;
    font-size: 16px;
  }
}
/* Suspense åŠ è½½å ä½ç¬¦æ ·å¼ */
.loading-placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  min-height: 200px;
  background: var(--el-bg-color-page);
  border-radius: 8px;
  border: 1px dashed var(--el-border-color-lighter);
}

.loading-text {
  margin-top: 16px;
  color: var(--el-text-color-secondary);
  font-size: 14px;
}

/* å…¨å±Loadingæ ·å¼ */
.fullscreen-loading {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  animation: fadeIn 0.3s ease-in-out;
}

.loading-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: var(--el-bg-color);
  padding: 40px 60px;
  border-radius: 16px;
  box-shadow: var(--el-box-shadow-dark);
  text-align: center;
  min-width: 300px;
}

.loading-icon {
  color: var(--el-color-primary);
  animation: spin 1.5s linear infinite;
}

.fullscreen-loading .loading-text {
  margin-top: 20px;
  font-size: 18px;
  font-weight: 600;
  color: var(--el-text-color-primary);
}

.loading-subtitle {
  margin-top: 8px;
  font-size: 14px;
  color: var(--el-text-color-secondary);
}

.loading-progress {
  margin-top: 10px;
  font-size: 13px;
  color: var(--el-color-primary);
  font-weight: 500;
  background: var(--el-color-primary-light-9);
  padding: 6px 12px;
  border-radius: 4px;
  border: 1px solid var(--el-color-primary-light-7);
}

.loading-timer {
  margin-top: 12px;
  font-size: 13px;
  color: var(--el-text-color-regular);
  font-family: 'Courier New', monospace;
  letter-spacing: 0.5px;
  opacity: 0.8;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.dark .fullscreen-loading {
  background: rgba(0, 0, 0, 0.8);
}

/* éª¨æ¶å±åŠ¨ç”»ä¼˜åŒ– */
.loading-placeholder .el-skeleton {
  width: 100%;
  max-width: 400px;
}

/* å¾ªç¯è§£æè®¾ç½®æ ·å¼ */
.loop-parse-settings {
  margin-top: 16px;
  padding: 16px;
  background: var(--el-fill-color-lighter);
  border-radius: 8px;
  border: 1px solid var(--el-border-color-lighter);
}

.setting-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.setting-item:last-child {
  margin-bottom: 0;
}

.setting-label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 500;
  color: var(--el-text-color-primary);
}

.setting-control {
  display: flex;
  align-items: center;
  gap: 8px;
}

.setting-unit {
  font-size: 14px;
  color: var(--el-text-color-secondary);
}

.setting-description {
  display: flex;
  align-items: flex-start;
  gap: 6px;
  font-size: 12px;
  color: var(--el-text-color-secondary);
  line-height: 1.4;
  margin-top: 8px;
}

.setting-description .el-icon {
  font-size: 14px;
  color: var(--el-color-info);
  margin-top: 1px;
  flex-shrink: 0;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.dark .loop-parse-settings {
  background: var(--el-fill-color-dark);
  border-color: var(--el-border-color);
}

/* ç§»åŠ¨ç«¯é€‚é… */
@media (max-width: 768px) {
  .setting-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }
  
  .setting-control {
    width: 100%;
    justify-content: space-between;
  }
  
  .loop-parse-settings {
    padding: 12px;
  }
}


</style>