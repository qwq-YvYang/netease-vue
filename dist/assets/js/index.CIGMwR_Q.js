const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/browser-id3-writer.Cin1xRVc.js","assets/js/vendor.DZvAaPCK.js","assets/js/jszip.min.rkY0D0ad.js","assets/js/audio-libs.Dz1_daxk.js","assets/js/rolldown-runtime.D4szDh5-.js"])))=>i.map(i=>d[i]);
import{r as e}from"./rolldown-runtime.D4szDh5-.js";import{$ as t,A as a,B as l,C as s,Ct as n,D as i,E as r,F as o,G as c,H as u,I as d,J as m,K as p,L as f,M as y,N as v,O as h,P as g,Q as w,R as b,S as _,St as x,T as k,U as I,V as E,W as C,X as U,Y as T,Z as $,_ as A,_t as V,a as P,at as S,b as M,bt as z,c as L,ct as D,d as O,dt as j,et as F,f as B,ft as N,g as R,gt as q,h as W,ht as Q,i as Z,it as H,j as K,k as J,l as G,lt as Y,m as X,mt as ee,n as te,nt as ae,o as le,ot as se,p as ne,pt as ie,q as re,r as oe,rt as ce,s as ue,st as de,t as me,tt as pe,u as fe,ut as ye,v as ve,vt as he,w as ge,wt as we,x as be,xt as _e,y as xe,yt as ke,z as Ie}from"./element-plus.CU6gAh9C.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Ee={};const Ce=function(e,t,a){let l=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),i=n?.nonce||n?.getAttribute("nonce");s=t.map(t=>{if((t=function(e){return"/"+e}(t))in Ee)return;Ee[t]=!0;const l=t.endsWith(".css"),s=l?'[rel="stylesheet"]':"";if(a)for(let a=e.length-1;a>=0;a--){const s=e[a];if(s.href===t&&(!l||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${t}"]${s}`))return;const n=document.createElement("link");return n.rel=l?"stylesheet":"modulepreload",l||(n.as="script"),n.crossOrigin="",n.href=t,i&&n.setAttribute("nonce",i),document.head.appendChild(n),l?new Promise((e,a)=>{n.addEventListener("load",e),n.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${t}`)))}):void 0}),l=Promise.all(s.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))}var s;function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return l.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};var Ue=class{static _read_uint24_be(e,t){return e.getUint8(t)<<16|e.getUint8(t+1)<<8|e.getUint8(t+2)}static _write_uint24_be(e,t,a){e.setUint8(t,a>>16&255),e.setUint8(t+1,a>>8&255),e.setUint8(t+2,255&a)}static async addMetadata(e,t){const a=new DataView(e);if(1716281667!==a.getUint32(0))throw new Error('Invalid FLAC file: "fLaC" marker not found.');const l=[];let s=4,n=-1;for(;s<a.byteLength;){const t=a.getUint8(s),i=!!(128&t),r=127&t,o=this._read_uint24_be(a,s+1),c=s+4+o;if(c>a.byteLength)throw new Error("Found corrupted metadata block.");if(l.push({type:r,data:new Uint8Array(e,s+4,o)}),i){n=c;break}s=c}if(-1===n)throw new Error("Could not find the end of the metadata section (last block flag not set).");const i=l.filter(e=>4!==e.type&&6!==e.type),r=this._createVorbisComment({TITLE:t.title||"",ARTIST:t.artist||"",ALBUM:t.album||"",DATE:t.year||"",LYRICS:t.lyrics||""});if(i.push({type:4,data:r}),t.cover){const e=await this._createPictureBlock(t.cover);i.push({type:6,data:e})}let o=i.reduce((e,t)=>e+4+t.data.byteLength,0);const c=new ArrayBuffer(o),u=new DataView(c),d=new Uint8Array(c);let m=0;for(let y=0;y<i.length;y++){const e=i[y],t=y===i.length-1;u.setUint8(m,e.type|(t?128:0)),this._write_uint24_be(u,m+1,e.data.byteLength),d.set(e.data,m+4),m+=4+e.data.byteLength}const p=new Uint8Array(e,n),f=new Uint8Array(4+o+p.byteLength);return f.set(new Uint8Array(e,0,4),0),f.set(d,4),f.set(p,4+o),new Blob([f],{type:"audio/flac"})}static _createVorbisComment(e){const t=(new TextEncoder).encode("MusicParser"),a=Object.entries(e).filter(([,e])=>e).map(([e,t])=>(new TextEncoder).encode(`${e}=${t}`));let l=4+t.length+4+a.reduce((e,t)=>e+4+t.length,0);const s=new ArrayBuffer(l),n=new DataView(s);let i=0;n.setUint32(i,t.length,!0),i+=4,new Uint8Array(s).set(t,i),i+=t.length,n.setUint32(i,a.length,!0),i+=4;for(const r of a)n.setUint32(i,r.length,!0),i+=4,new Uint8Array(s).set(r,i),i+=r.length;return new Uint8Array(s)}static async _createPictureBlock(e){const t=await e.arrayBuffer(),a=(new TextEncoder).encode(e.type||"image/jpeg"),l=(new TextEncoder).encode("Cover"),s=8+a.length+4+l.length+4+4+4+4+4+t.byteLength,n=new ArrayBuffer(s),i=new DataView(n);let r=0;return i.setUint32(r,3,!1),r+=4,i.setUint32(r,a.length,!1),r+=4,new Uint8Array(n).set(a,r),r+=a.length,i.setUint32(r,l.length,!1),r+=4,new Uint8Array(n).set(l,r),r+=l.length,i.setUint32(r,0,!1),r+=4,i.setUint32(r,0,!1),r+=4,i.setUint32(r,24,!1),r+=4,i.setUint32(r,0,!1),r+=4,i.setUint32(r,t.byteLength,!1),r+=4,new Uint8Array(n).set(new Uint8Array(t),r),new Uint8Array(n)}};async function Te(e,t,a){let l,s="image/jpeg";if(t.cover)try{const e=await fetch(t.cover);if(!e.ok)throw new Error(`Failed to fetch cover image: ${e.statusText}`);s=e.headers.get("content-type")||s,l=await e.arrayBuffer()}catch{}if(".mp3"===a){const{ID3Writer:a}=await Ce(async()=>{const{ID3Writer:e}=await import("./browser-id3-writer.Cin1xRVc.js");return{ID3Writer:e}},__vite__mapDeps([0,1])),n=new a(e);return n.setFrame("TIT2",t.name).setFrame("TPE1",[t.artist]).setFrame("TALB",t.album).setFrame("TYER",t.year),t.lyrics&&n.setFrame("USLT",{description:"Lyrics",lyrics:t.lyrics}),l&&n.setFrame("APIC",{type:3,data:l,description:"Cover",mime:s}),n.addTag(),n.arrayBuffer}if(".flac"===a)try{const a={title:t.name,artist:t.artist,album:t.album,year:t.year,lyrics:t.lyrics};return l&&(a.cover=new Blob([l],{type:s})),await(await Ue.addMetadata(e,a)).arrayBuffer()}catch{return e}return e}const $e={filenameFormat:"song-artist",writeMetadata:!1,zipDownload:!1,srtLyricsDownload:!1,layoutMode:"single-column",enableUrlCache:!1,urlCacheTTLMinutes:15},Ae=z({...$e}),Ve=()=>{try{localStorage.setItem("app-settings",JSON.stringify(Ae))}catch{}},Pe=(e,t)=>{Ae[e]=t,Ve()},Se=(e,t=!1)=>{(!Number.isFinite(e)||e<0)&&(e=0);const a=Math.floor(e/36e5),l=Math.floor(e%36e5/6e4),s=Math.floor(e%6e4/1e3),n=e%1e3,i=(e,t=2)=>String(e).padStart(t,"0");return t?`${i(a)}:${i(l)}:${i(s)}`:`${i(a)}:${i(l)}:${i(s)},${String(n).padStart(3,"0")}`},Me=(e,t={})=>{const{fallbackDurationMs:a=3e3,minDurationMs:l=500,maxDurationMs:s=5e3,windowsLineEndings:n=!0,omitMilliseconds:i=!0}=t,r=(e=>{if(!e||"string"!=typeof e)return[];const t=e.split(/\r?\n/);let a=0;for(const i of t){const e=i.trim().match(/^\[offset:\s*([+-]?\d+)\s*\]/i);if(e){const t=parseInt(e[1],10);Number.isFinite(t)&&(a=t);break}}const l=[],s=/\[(\d{1,2}):(\d{2})(?:[.:](\d{1,3}))?\]/g;for(const i of t){const e=i.trim();if(!e)continue;if(/^\[(ti|ar|al|by|offset):/i.test(e))continue;const t=[...e.matchAll(s)];if(0===t.length)continue;const n=e.replace(s,"").trim();if(n)for(const s of t){const e=parseInt(s[1],10)||0,t=parseInt(s[2],10)||0,i=s[3]||"0";let r=0;if(i){const e=i.padEnd(3,"0").slice(0,3);r=parseInt(e,10)||0}let o=6e4*e+1e3*t+r;o+=a,o<0&&(o=0),l.push({time:o,text:n})}}l.sort((e,t)=>e.time-t.time);const n=[];for(const i of l)n.length&&n[n.length-1].time===i.time?n[n.length-1]=i:n.push(i);return n})(e);if(!r.length)return"";const o=[];for(let u=0;u<r.length;u++){const e=r[u].time;let t;if(u<r.length-1){const a=r[u+1].time;t=Math.max(a,e+1),t=Math.min(t,e+s)}else t=Math.min(e+a,e+s);(!Number.isFinite(t)||t<=e)&&(t=e+Math.max(l,a)),o.push(String(u+1)),o.push(`${Se(e,i)} --\x3e ${Se(t,i)}`),o.push(r[u].text),o.push("")}let c=o.join("\n").trim();return n&&(c=c.replace(/\n/g,"\r\n")),c+(n?"\r\n":"\n")};var ze=_e(!1);const Le=e=>{if("undefined"!=typeof document){const t=document.body;t.classList.add("theme-switching"),setTimeout(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},50),setTimeout(()=>{t.classList.remove("theme-switching")},600)}};function De(e,t){if(!e)return;const a=Fe(t||"download");try{if("undefined"!=typeof window&&window.navigator&&"function"==typeof window.navigator.msSaveOrOpenBlob)return void window.navigator.msSaveOrOpenBlob(e,a)}catch{}const l=/iP(ad|hone|od)/.test(navigator.userAgent)||/Macintosh/.test(navigator.platform)&&"ontouchend"in document,s="download"in HTMLAnchorElement.prototype;if(l&&!s)try{const t=new FileReader;return t.onload=()=>{const e=t.result,l=document.createElement("a");l.href=e,l.download=a,l.rel="noopener",l.target="_blank",l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)},void t.readAsDataURL(e)}catch{}const n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=a,i.rel="noopener",i.target="_self",i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),setTimeout(()=>{try{URL.revokeObjectURL(n)}catch{}},2e3)}function Oe(e,t){if(!e)return e;const a=e.type||"";return a&&a===t?e:!a&&t?new Blob([e],{type:t}):e}function je(e){switch((e||"").toLowerCase()){case".mp3":return"audio/mpeg";case".flac":return"audio/flac";case".m4a":case".mp4":return"audio/mp4";case".eac3":case".ec3":return"audio/eac3";case".lrc":return"text/plain";case".srt":return"application/x-subrip";case".zip":return"application/zip";case".jpg":case".jpeg":return"image/jpeg";case".png":return"image/png";default:return"application/octet-stream"}}function Fe(e){return String(e).replace(/[\\/:*?"<>|]/g,"-").replace(/[\r\n]/g," ").trim().slice(0,180)}var Be=["https://wyapi.toubiec.cn","https://wyapi-2.toubiec.cn","https://wyapi-1.toubiec.cn"],Ne=()=>Be,Re=null,qe=0,We=async(e,t=2500)=>{try{const a=new AbortController,l=setTimeout(()=>a.abort(),t);return await fetch(e,{method:"HEAD",mode:"no-cors",signal:a.signal}),clearTimeout(l),!0}catch{return!1}},Qe=e=>{const t=String(e).replace(/^\/+/,"");return`${Re||"https://wyapi-1.toubiec.cn"}/${t}`},Ze=async(e,t=null)=>{const a=((e=null)=>{const t={method:"POST",headers:{"Content-Type":"application/json"}};return e&&(t.body=JSON.stringify(e)),t})(t);try{(async()=>{if(Re&&Date.now()-qe<3e5)return Re;for(const e of Ne())if(await We(e))return Re=e,qe=Date.now(),Re;return Re="https://wyapi-1.toubiec.cn",qe=Date.now(),Re})().catch(()=>{});const t=await fetch(e,a);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return{data:await t.json()}}catch(l){try{const t=/^https?:\/\//i.test(e)?String(new URL(e).pathname).replace(/^\/+/,""):String(e).replace(/^\/+/,""),l=Ne();for(const s of l){const l=`${s}/${t}`;if(l!==e)try{const e=await fetch(l,a);if(e.ok){const t=await e.json();return Re=s,qe=Date.now(),{data:t}}}catch{}}}catch{}throw l}};const He=async e=>{try{if(!e)return null;"string"!=typeof e&&(e=String(e));const t=(e=>{if(!e)return e;"string"!=typeof e&&(e=String(e));const t=e.match(/(https?:\/\/[^\s"<>]+)/);return t?t[0]:e})(e);if(!t)return null;if(/https?:\/\/163cn\.tv\/([a-zA-Z0-9]+)/.test(t))return t;const a=[/https?:\/\/music\.163\.com\/song\?id=(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/song\/(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/song\?id=(\d+)/,/https?:\/\/music\.163\.com\/#\/song\?id=(\d+)/],l=[/https?:\/\/music\.163\.com\/playlist\?id=(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/playlist\?id=(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/playlist\/(\d+)/,/https?:\/\/music\.163\.com\/#\/playlist\?id=(\d+)/,/https?:\/\/music\.163\.com\/discover\/toplist\?id=(\d+)/],s=[/https?:\/\/music\.163\.com\/album\?id=(\d+)/,/https?:\/\/music\.163\.com\/album\/(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/album\?id=(\d+)/,/https?:\/\/music\.163\.com\/#\/album\?id=(\d+)/,/https?:\/\/music\.163\.com\/#\/album\/(\d+)/];for(const e of[...a,...l,...s]){const a=t.match(e);if(a)return a[1]}return null}catch{return null}},Ke=He,Je=He,Ge=He,Ye={jymaster:"超清母带(Master)",dolby:"杜比全景声(Dolby Atmos)",sky:"沉浸环绕声(Surround Audio)",jyeffect:"高清臻音(Spatial Audio)",hires:"高清晰度无损(Hi-Res)",lossless:"无损(SQ)",exhigh:"极高(HQ)",standard:"标准(128k)"};var Xe=new Map,et=(e,t)=>`${e}|${t}`;const tt=async(e,t="lossless",a={})=>{const{bypassCache:l=!1,updateCache:s=!0}=a;if(Ae?.enableUrlCache&&!l){const a=((e,t)=>{try{const a=et(e,t),l=Xe.get(a);if(!l)return null;const s=60*(Number(Ae?.urlCacheTTLMinutes)||15)*1e3;return Date.now()-l.fetchedAt>s?(Xe.delete(a),null):l.data}catch{return null}})(e,t);if(a&&a.url)return a}const n=await Ze(Qe("api/music/url"),{id:e,level:t});if(200!==n.data.code)throw new Error(n.data.msg||"获取音乐链接失败");const i=n.data.data[0];if(!i||0===i.length)throw new Error("该音质的音乐链接不可用");return Ae?.enableUrlCache&&s&&((e,t,a)=>{Xe.set(et(e,t),{data:a,fetchedAt:Date.now()})})(e,t,i),i},at=async e=>{try{if("string"!=typeof e){if(null==e)throw new Error("歌曲ID不能为空");e=String(e)}const t=await Ze(Qe("api/music/lyric"),{id:e});if(200!==t.data.code)throw new Error(t.data.msg||"获取歌词失败");const a=t.data.data;return{lrc:a.lrc||"",tlyric:a.tlyric||"",romalrc:a.romalrc||"",klyric:a.klyric||""}}catch{return{lrc:"",tlyric:"",romalrc:"",klyric:""}}};var lt={validateUrl:e=>{try{return!(!e||"string"!=typeof e)&&[/https?:\/\/music\.163\.com\/song\?id=(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/song\/(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/song\?id=(\d+)/,/https?:\/\/music\.163\.com\/#\/song\?id=(\d+)/,/https?:\/\/music\.163\.com\/playlist\?id=(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/playlist\?id=(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/playlist\/(\d+)/,/https?:\/\/music\.163\.com\/#\/playlist\?id=(\d+)/,/https?:\/\/music\.163\.com\/discover\/toplist\?id=(\d+)/,/https?:\/\/music\.163\.com\/album\?id=(\d+)/,/https?:\/\/music\.163\.com\/album\/(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/album\?id=(\d+)/,/https?:\/\/music\.163\.com\/#\/album\?id=(\d+)/,/https?:\/\/music\.163\.com\/#\/album\/(\d+)/,/https?:\/\/163cn\.tv\/([a-zA-Z0-9]+)/].some(t=>t.test(e))}catch{return!1}},validateMusicUrl:e=>{try{return[/https?:\/\/music\.163\.com\/song\?id=(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/song\/(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/song\?id=(\d+)/,/https?:\/\/music\.163\.com\/#\/song\?id=(\d+)/,/https?:\/\/163cn\.tv\/([a-zA-Z0-9]+)/].some(t=>t.test(e))}catch{return!1}},validatePlaylistUrl:e=>{try{return[/https?:\/\/music\.163\.com\/playlist\?id=(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/playlist\?id=(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/playlist\/(\d+)/,/https?:\/\/music\.163\.com\/#\/playlist\?id=(\d+)/,/https?:\/\/163cn\.tv\/([a-zA-Z0-9]+)/].some(t=>t.test(e))}catch{return!1}},validateAlbumUrl:e=>{try{return[/https?:\/\/music\.163\.com\/album\?id=(\d+)/,/https?:\/\/music\.163\.com\/album\/(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/album\?id=(\d+)/,/https?:\/\/y\.music\.163\.com\/m\/album\/(\d+)/,/https?:\/\/music\.163\.com\/#\/album\?id=(\d+)/,/https?:\/\/music\.163\.com\/#\/album\/(\d+)/,/https?:\/\/163cn\.tv\/([a-zA-Z0-9]+)/].some(t=>t.test(e))}catch{return!1}},extractIdFromUrl:He,getMusicIdFromUrl:Ke,extractPlaylistId:Je,extractAlbumId:Ge,parseMusicInfo:async(e,t="lossless")=>{try{const a=await He(e);if(!a)throw new Error("无法从链接中提取歌曲ID");const l=await Ze(Qe("api/music/detail"),{id:a});if(200!==l.data.code)throw new Error(l.data.msg||"获取歌曲信息失败");const s=l.data.data,n=s.duration.split(":"),i=1e3*(60*parseInt(n[0])+parseInt(n[1]));let r=null,o="standard",c=0,u=0,d="mp3";try{const e=await tt(s.id,t);if(!e||!e.url)throw new Error("该歌曲已下架或者无法获取");{r=e.url,o=e.level||t,c=e.size||0,u=e.br||0;const a=["lossless","hires","jymaster","sky","jyeffect"],l=e.level||"standard";if(e.type)d=e.type.toLowerCase();else{const e=r.match(/\.([a-zA-Z0-9]+)(?=\?|$)/);d=e&&e[1]?e[1].toLowerCase():a.includes(l)?"flac":"mp3"}}}catch{throw new Error("该歌曲已下架或者无法获取")}const m={id:s.id.toString(),name:s.name,artist:s.singer,album:s.album,cover:s.picimg,duration:i,url:r,quality:o,qualityName:Ye[o]||o,fileSize:c,bitRate:u,lrc:"",fileExtension:`.${d.toLowerCase()}`};try{const e=await at(s.id);e&&e.lrc&&(m.lrc=e.lrc,m.tlyric=e.tlyric||"",m.romalrc=e.romalrc||"",m.klyric=e.klyric||"")}catch{}return m}catch(a){if(a.response){const e=a.response.status,t=a.response.data;if(404===e)throw new Error("歌曲不存在或已被删除");if(e>=500)throw new Error("服务器暂时不可用，请稍后重试");if(t&&t.msg)throw new Error(t.msg)}else if(a.request)throw new Error("网络连接失败，请检查网络连接");throw new Error(a.message||"解析失败，请检查链接是否正确或稍后重试")}},getLyrics:at,downloadMusic:async(e,t={})=>{const{filenameFormat:a="song-artist",writeMetadata:l=!1}=t,s=e.fileExtension||".mp3";let n;n="artist-song"===a?`${e.artist} - ${e.name}${s}`:`${e.name} - ${e.artist}${s}`;try{const t=await fetch(e.url,{cache:"no-store",mode:"cors"});if(!t.ok)throw new Error(`下载音频文件失败: ${t.statusText}`);let a=await t.arrayBuffer();if(l&&(".mp3"===s||".flac"===s))try{const t={name:e.name,artist:e.artist,album:e.album,year:(new Date).getFullYear().toString(),lyrics:e.lrc,cover:e.cover};a=await Te(a,t,s)}catch{}const i=t.headers.get("Content-Type")||je(s);return De(Oe(new Blob([a],{type:i}),i),Fe(n)),!0}catch(i){throw new Error(`下载失败: ${i.message}`)}},getPlaylistDetail:async e=>{try{const t=await He(e);if(!t)throw new Error("无法从链接中提取歌单ID");const a=String(e).match(/[?&]p=(\d+)/),l=a?{id:t,page:parseInt(a[1],10)}:{id:t},s=await Ze(Qe("api/music/playlist"),l);return s.data&&200===s.data.code?{success:!0,data:s.data.data}:{success:!1,error:s.data?.msg||"获取歌单信息失败"}}catch(t){return t.message&&t.message.includes("ERR_HTTP2_PROTOCOL_ERROR")?{success:!1,error:"API服务器暂时不可用，请稍后重试。这可能是由于服务器维护或网络问题导致的。"}:"ENOTFOUND"===t.code||"ECONNREFUSED"===t.code?{success:!1,error:"API服务器无法连接，请检查网络连接或稍后重试"}:{success:!1,error:`网络请求失败: ${t.message||"未知错误"}，请稍后重试`}}},getAlbumDetail:async e=>{try{const t=await He(e);if(!t)throw new Error("无法从链接中提取专辑ID");const a={id:t},l=await Ze(Qe("api/music/album"),a);return l.data&&200===l.data.code?{success:!0,data:l.data.data}:{success:!1,error:l.data?.msg||"获取专辑信息失败"}}catch(t){return{success:!1,error:`网络请求失败: ${t.message||"未知错误"}，请稍后重试`}}},getMusicInfo:async e=>{try{const t=Qe("api/getMusicInfo"),a=await Ze(t,{id:e});return a.data&&200===a.data.code?{success:!0,data:a.data.data}:{success:!1,error:a.data?.msg||"获取歌曲信息失败"}}catch{return{success:!1,error:"网络请求失败"}}},searchMusic:async e=>{try{const t=await Ze("netease/search",{keywords:e,limit:20});return t.data&&t.data.result&&t.data.result.songs?{success:!0,data:{songs:t.data.result.songs.map(e=>({id:e.id,name:e.name,artists:e.artists||[],album:e.album||{},duration:e.duration||0}))}}:{success:!1,error:"搜索结果为空"}}catch(t){return{success:!1,error:t.message||"搜索失败"}}}},st=(e,t)=>{const a=e.__vccOpts||e;for(const[l,s]of t)a[l]=s;return a},nt={class:"info-container"},it={class:"song-title"},rt={class:"artist-name"},ot={class:"metadata-grid"},ct={class:"meta-value"},ut={class:"meta-value"},dt={class:"meta-value"},mt={class:"meta-value"},pt={class:"direct-link-section"},ft={class:"action-section"},yt={class:"btn-text"},vt={key:0,class:"progress-container"},ht={class:"progress-info"},gt={class:"progress-text"},wt={class:"progress-percentage"},bt=st({__name:"MusicPlayer",props:{musicInfo:{type:Object,required:!0}},setup(t){const a=t,l=_e(null),s=_e(!1),n=_e(0),i=_e(""),r=_e("准备下载"),o=ae(()=>"undefined"!=typeof window&&window.innerWidth<=768),c=(e,t,a)=>{const l=e.replace(/[<>:"/\\|?*]/g,"_"),s=t.replace(/[<>:"/\\|?*]/g,"_"),n=Ae.filenameFormat||"song-artist";return"artist-song"===n?`${s} - ${l}${a}`:"song-only"===n?`${l}${a}`:`${l} - ${s}${a}`},u=e=>{const t=e.split("\n"),a=[];return t.forEach((e,t)=>{const l=e.match(/\[(\d{2}):(\d{2}[.:]?\d*)\]/);if(l){const s=6e4*parseInt(l[1],10)+1e3*(parseFloat(l[2].replace(".",":"))||0);let n=e.replace(/\[\d{2}:\d{2}[.:]?\d*\]/g,"").trim();n=n.replace(/\s\s+/g," "),a.push([s,t,n])}}),a.sort((e,t)=>e[0]-t[0]),a},d=(e,t)=>e?t?((e,t)=>{const a=u(e),l=u(t),s=a.length,n=l.length;let i="";for(let r=0,o=0;r<s&&o<n;r++){for(;a[r][0]>l[o][0]&&o+1<n;)o++;a[r][0]===l[o][0]&&(l[o][2]=l[o][2].replace("/",""),l[o][2]&&(a[r][2]+=` (翻译：${l[o][2]})`),o++)}for(let r=0;r<s;r++){const e=a[r][0];i+=`[${String(Math.floor(e/6e4)).padStart(2,"0")}:${String(Math.floor(e%6e4/1e3)).padStart(2,"0")}.${String(e%1e3).padStart(3,"0")}]${a[r][2]}\n`}return i})(e,t):e:"",m=async()=>{if(a.musicInfo?.url){if(s.value=!0,n.value=0,i.value="",Ae.zipDownload){r.value="准备打包";try{const{default:t}=await Ce(async()=>{const{default:t}=await import("./jszip.min.rkY0D0ad.js").then(e());return{default:t}},__vite__mapDeps([2,3,4])),l=new t;r.value="下载音频文件",n.value=10;let s=a.musicInfo.url,o=await fetch(s);if(!o.ok)try{const e=await lt.getMusicUrl(a.musicInfo.id,a.musicInfo.quality||"lossless",{bypassCache:!0});e&&e.url&&(s=e.url,o=await fetch(s))}catch{}if(!o.ok)throw new Error(`音频下载失败: ${o.statusText}`);const u=await o.arrayBuffer();n.value=30;const m=(o.headers.get("Content-Type")||"").toLowerCase();let f=".mp3";if(m.includes("flac"))f=".flac";else if(m.includes("mp4"))f=".m4a";else if(m.includes("eac3")||m.includes("ec3"))f=".eac3";else try{const e=new URL(s).pathname.toLowerCase();e.endsWith(".flac")?f=".flac":e.endsWith(".m4a")||e.endsWith(".mp4")?f=".m4a":(e.endsWith(".eac3")||e.endsWith(".ec3"))&&(f=".eac3")}catch{}r.value="处理元数据",n.value=40;const v={name:a.musicInfo.name||"未知歌曲",artist:a.musicInfo.artist||"未知艺术家",album:a.musicInfo.album||"未知专辑",year:a.musicInfo.year||"",lyrics:d(a.musicInfo.lrc||"",a.musicInfo.tlyric||""),cover:a.musicInfo.cover||null};let h;if(!Ae.writeMetadata||".mp3"!==f&&".flac"!==f)h=u;else{r.value="写入元数据";try{h=await Te(u,v,f)}catch{h=u}}n.value=50;const g=c(a.musicInfo.name,a.musicInfo.artist,f);if(l.file(g,h),r.value="添加音频文件",n.value=60,a.musicInfo.cover)try{r.value="下载封面图片";const e=await fetch(a.musicInfo.cover);if(e.ok){const t=await e.arrayBuffer(),s=e.headers.get("content-type")?.includes("png")?".png":".jpg",n=c(a.musicInfo.name,a.musicInfo.artist,s);l.file(n,t)}}catch{}if(n.value=70,a.musicInfo.lrc){const e=d(a.musicInfo.lrc,a.musicInfo.tlyric);if(Ae.srtLyricsDownload){r.value="添加SRT歌词";try{const t=Me(e);if(t){const e=c(a.musicInfo.name,a.musicInfo.artist,".srt");l.file(e,t)}}catch{const t=c(a.musicInfo.name,a.musicInfo.artist,".lrc");l.file(t,e)}}else{r.value="添加LRC歌词";const t=c(a.musicInfo.name,a.musicInfo.artist,".lrc");l.file(t,e)}}n.value=80,r.value="生成信息文件";const w=`歌曲信息\n==================\n歌名: ${a.musicInfo.name}\n艺术家: ${a.musicInfo.artist}\n专辑: ${a.musicInfo.album}\n时长: ${p(a.musicInfo.duration)}\n音质: ${a.musicInfo.qualityName}\n大小: ${y(a.musicInfo.fileSize)}\n下载时间: ${(new Date).toLocaleString("zh-CN")}\n==================\n`;l.file("歌曲信息.txt",w),n.value=85,r.value="生成ZIP文件";const b=await l.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}},e=>{const t=85+.1*e.percent;n.value=Math.round(t)});n.value=95,r.value="准备下载";const _=Oe(b,je(".zip"));De(_,Fe(c(a.musicInfo.name,a.musicInfo.artist,".zip"))),r.value="下载完成",i.value="success",n.value=100,me({title:"下载成功",message:`成功下载音乐包：${a.musicInfo.name}（包含音频、封面、歌词、信息文件）`,type:"success",duration:5e3})}catch(t){r.value="下载失败",i.value="exception",te.error(`下载失败：${t.message}`)}}else{r.value="准备下载";try{n.value=10,r.value="下载音频文件";let e=a.musicInfo.url,t=await fetch(e);if(!t.ok)try{const l=await lt.getMusicUrl(a.musicInfo.id,a.musicInfo.quality||"lossless",{bypassCache:!0});l&&l.url&&(e=l.url,t=await fetch(e))}catch{}if(!t.ok)throw new Error(`音频下载失败: ${t.statusText}`);const l=await t.arrayBuffer();n.value=50;const s=(t.headers.get("Content-Type")||"").toLowerCase();let o,u=".mp3";if(s.includes("flac"))u=".flac";else if(s.includes("mp4"))u=".m4a";else if(s.includes("eac3")||s.includes("ec3"))u=".eac3";else try{const t=new URL(e).pathname.toLowerCase();t.endsWith(".flac")?u=".flac":t.endsWith(".m4a")||t.endsWith(".mp4")?u=".m4a":(t.endsWith(".eac3")||t.endsWith(".ec3"))&&(u=".eac3")}catch{}if(r.value="处理元数据",n.value=70,!Ae.writeMetadata||".mp3"!==u&&".flac"!==u)o=l;else{const e={name:a.musicInfo.name||"未知歌曲",artist:a.musicInfo.artist||"未知艺术家",album:a.musicInfo.album||"未知专辑",year:a.musicInfo.year||"",lyrics:d(a.musicInfo.lrc,a.musicInfo.tlyric),cover:a.musicInfo.cover||null};try{o=await Te(l,e,u)}catch{o=l}}n.value=90,r.value="准备下载";const m=t.headers.get("Content-Type")||je(u),p=new Blob([o],{type:m});De(p,Fe(c(a.musicInfo.name,a.musicInfo.artist,u))),r.value="下载完成",i.value="success",n.value=100,me({title:"下载成功",message:`成功下载音频文件：${a.musicInfo.name}`,type:"success",duration:3e3})}catch(t){r.value="下载失败",i.value="exception",te.error(`下载失败：${t.message}`)}}setTimeout(()=>{s.value=!1},2e3)}},p=e=>{if(!e)return"00:00";const t=Math.floor(e/1e3),a=Math.floor(t/60),l=t%60;return`${String(a).padStart(2,"0")}:${String(l).padStart(2,"0")}`},y=e=>{if(!e)return"未知";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["B","KB","MB","GB"][t]};return q(()=>a.musicInfo,e=>{e&&e.url&&(l.value&&l.value.destroy(),Y(()=>{"undefined"!=typeof window&&void 0!==window.APlayer&&(l.value=new window.APlayer({container:document.getElementById("aplayer-container"),theme:ze.value?"#90caf9":"#409EFF",audio:[{name:e.name,artist:e.artist,url:e.url,cover:e.cover,lrc:d(e.lrc,e.tlyric)}],lrcType:1}))}))},{deep:!0,immediate:!0}),(e,a)=>{const l=ee("el-icon"),c=ee("el-input"),u=ee("el-button"),d=ee("el-progress"),h=ee("el-card");return N(),H(h,{class:"result-card",shadow:"hover"},{default:V(()=>[ce("div",nt,[ce("h2",it,we(t.musicInfo.name),1),ce("p",rt,we(t.musicInfo.artist),1),ce("div",ot,[a[0]||(a[0]=ce("span",{class:"meta-label"},"专辑",-1)),ce("span",ct,we(t.musicInfo.album),1),a[1]||(a[1]=ce("span",{class:"meta-label"},"时长",-1)),ce("span",ut,we(p(t.musicInfo.duration)),1),a[2]||(a[2]=ce("span",{class:"meta-label"},"音质",-1)),ce("span",dt,we(t.musicInfo.qualityName),1),a[3]||(a[3]=ce("span",{class:"meta-label"},"大小",-1)),ce("span",mt,we(y(t.musicInfo.fileSize)),1)])]),a[4]||(a[4]=ce("div",{id:"aplayer-container",class:"aplayer-instance"},null,-1)),ce("div",pt,[D(c,{"model-value":t.musicInfo.url,readonly:"",size:o.value?"small":void 0},{prepend:V(()=>[D(l,null,{default:V(()=>[D(x(f))]),_:1})]),_:1},8,["model-value","size"])]),ce("div",ft,[D(u,{type:"primary",onClick:m,loading:s.value,disabled:!t.musicInfo.id,class:"download-btn",size:o.value?"default":"large"},{default:V(()=>[D(l,null,{default:V(()=>[D(x(v))]),_:1}),ce("span",yt,we(s.value?r.value:"下载音乐包"),1)]),_:1},8,["loading","disabled","size"])]),s.value?(N(),se("div",vt,[ce("div",ht,[ce("span",gt,we(r.value),1),ce("span",wt,we(n.value)+"%",1)]),D(d,{percentage:n.value,status:i.value,"stroke-width":8,"show-text":!1,style:{width:"100%"}},null,8,["percentage","status"])])):S("",!0)]),_:1})}}},[["__scopeId","data-v-fe18e5ea"]]),_t={class:"playlist-detail"},xt={key:0,class:"tracks-section"},kt={class:"section-header"},It={class:"header-left"},Et={class:"track-total"},Ct={class:"playlist-info-bar"},Ut={class:"info-item"},Tt={class:"info-item"},$t={class:"tracks-list"},At=["onClick"],Vt=["src"],Pt={class:"track-info"},St={class:"track-title-line"},Mt={class:"track-name"},zt={key:0,class:"track-artist"},Lt={class:"track-actions"},Dt={class:"pagination-section"},Ot={class:"page-info"},jt={key:1,class:"loading-container"},Ft={key:2,class:"error-container"};var Bt=st({name:"PlaylistDetail",components:{ElButton:h,ElIcon:m,Loading:Ie},props:{playlistInfo:{type:Object,required:!0},displayTracks:{type:Array,default:()=>[]},currentPage:{type:Number,default:1},pageSize:{type:Number,default:20},totalTracks:{type:Number,default:0},selectedQuality:{type:String,default:"lossless"},settings:{type:Object,default:()=>({})}},emits:["track-selected","track-parsed","page-change"],setup(e,{emit:t}){const a=ae(()=>e.playlistInfo),l=ae(()=>e.playlistInfo?.isAlbum?"作者":"创建者"),s=_e(!1),n=_e(""),i=_e(null),r=_e(null),o=e=>{t("page-change",e)},c=ae(()=>{const t=Number(e.pageSize)||1,a=Number(e.totalTracks)||0;return Math.max(1,Math.ceil(a/t))});return{playlistData:a,creatorLabel:l,loading:s,error:n,selectedTrack:i,parsingTrackId:r,selectTrack:e=>{i.value=e,t("track-selected",e)},parseTrack:async a=>{r.value=a.id;try{const l="string"==typeof e.selectedQuality?e.selectedQuality:"lossless";t("track-parsed",{track:a,quality:l}),te.success(`开始解析：${a.name}`)}catch{te.error("解析失败，请重试")}finally{r.value=null}},handlePageChange:o,formatPlayCount:e=>e>=1e8?Math.floor(e/1e8)+"亿":e>=1e4?Math.floor(e/1e4)+"万":e.toString(),getCover:e=>e?.picUrl||e?.cover||e?.al?.picUrl||e?.album?.picUrl||a.value?.picUrl||"",onCoverError:e=>{e.target.style.visibility="hidden"},getArtist:e=>e?.artist||e?.singer||("string"==typeof e?.artists?e.artists:null)||Array.isArray(e?.artists)&&e.artists[0]?.name||Array.isArray(e?.ar)&&e.ar[0]?.name||"",totalPages:c,goPrevPage:()=>{e.currentPage>1&&o(e.currentPage-1)},goNextPage:()=>{e.currentPage<c.value&&o(e.currentPage+1)}}}},[["render",function(e,a,l,s,i,r){const o=ee("el-button"),c=ee("Loading"),u=ee("el-icon"),d=ee("el-alert");return N(),se("div",_t,[s.playlistData&&l.totalTracks>0?(N(),se("div",xt,[ce("div",kt,[ce("div",It,[a[1]||(a[1]=ce("h2",null,"歌曲列表",-1)),ce("span",Et,"共 "+we(l.totalTracks)+" 首 (第 "+we(l.currentPage)+" 页，每页 "+we(l.pageSize)+" 首)",1)]),a[2]||(a[2]=ce("div",{class:"header-right"},null,-1))]),ce("div",Ct,[ce("span",Ut,we(s.creatorLabel)+"："+we(s.playlistData.creator),1),a[3]||(a[3]=ce("span",{class:"info-separator"},"•",-1)),ce("span",Tt,"歌曲数："+we(l.totalTracks),1)]),ce("div",$t,[(N(!0),se(t,null,ie(l.displayTracks,e=>(N(),se("div",{key:e.id,class:n(["track-item",{selected:s.selectedTrack&&s.selectedTrack.id===e.id}]),onClick:t=>s.selectTrack(e)},[ce("img",{class:"track-cover",src:s.getCover(e),alt:"cover",loading:"lazy",onError:a[0]||(a[0]=(...e)=>s.onCoverError&&s.onCoverError(...e))},null,40,Vt),ce("div",Pt,[ce("div",St,[ce("span",Mt,we(e.name),1),s.getArtist(e)?(N(),se("span",zt,we(s.getArtist(e)),1)):S("",!0)])]),ce("div",Lt,[D(o,{type:"primary",size:"small",onClick:w(t=>s.parseTrack(e),["stop"]),loading:s.parsingTrackId===e.id},{default:V(()=>[de(we(s.parsingTrackId===e.id?"解析中...":"解析"),1)]),_:2},1032,["onClick","loading"])])],10,At))),128))]),ce("div",Dt,[D(o,{size:"small",onClick:s.goPrevPage,disabled:l.currentPage<=1},{default:V(()=>[...a[4]||(a[4]=[de("上一页",-1)])]),_:1},8,["onClick","disabled"]),ce("span",Ot,"第 "+we(l.currentPage)+" 页 / 共 "+we(s.totalPages)+" 页",1),D(o,{size:"small",type:"primary",onClick:s.goNextPage,disabled:l.currentPage>=s.totalPages},{default:V(()=>[...a[5]||(a[5]=[de("下一页",-1)])]),_:1},8,["onClick","disabled"])])])):S("",!0),s.loading?(N(),se("div",jt,[D(u,{class:"is-loading"},{default:V(()=>[D(c)]),_:1}),a[6]||(a[6]=ce("span",null,"正在加载歌单信息...",-1))])):S("",!0),s.error?(N(),se("div",Ft,[D(d,{title:s.error,type:"error","show-icon":"",closable:!1},null,8,["title"])])):S("",!0)])}],["__scopeId","data-v-d3cb30b3"]]);const Nt=_e(1),Rt=_e(20),qt=_e(0),Wt=_e([]),Qt=_e([]),Zt=()=>{const e=(Nt.value-1)*Rt.value,t=e+Rt.value;Qt.value=Wt.value.slice(e,t)},Ht=e=>{Nt.value=e,Zt()};var Kt=()=>"API_V2"===Ae?.apiVersion?"接口2":"接口1";const Jt=_e(""),Gt=_e(!1),Yt=_e(null),Xt=_e(""),ea=_e(!1),ta=_e(null),aa=_e(""),la=_e(!1),sa=_e(null),na=_e(0),ia=_e(0);var ra=null,oa=()=>{na.value=Date.now(),ia.value=0,ra=setInterval(()=>{ia.value=Math.floor((Date.now()-na.value)/1e3)},100)},ca=()=>{ra&&(clearInterval(ra),ra=null)};const ua=async e=>{if(Jt.value.trim())if(lt.validateMusicUrl(Jt.value)){Gt.value=!0;try{const t=await lt.parseMusicInfo(Jt.value,e);Yt.value=t;const a=()=>"API_V2"===Ae?.apiVersion?"接口2":"接口1";me({title:"解析成功",message:`成功解析歌曲：${t.name} (${t.qualityName}) ${a()}`,type:"success"})}catch(t){let e="解析失败，请检查链接是否正确";t.message&&t.message.includes("API服务器暂时不可用")?(e="API服务器暂时不可用，请稍后重试。这可能是由于服务器维护或网络问题导致的。",te({message:e,type:"warning",duration:8e3,showClose:!0})):t.message&&(t.message.includes("付费")||t.message.includes("版权限制"))?(e="该歌曲为付费或受版权限制，暂无法获取播放链接",te({message:e,type:"error",duration:6e3,showClose:!0})):t.message&&(t.message.includes("下架")||t.message.includes("无法获取"))?(e="该歌曲已下架或者无法获取",te({message:e,type:"error",duration:6e3,showClose:!0})):t.message&&t.message.includes("网络连接失败")?(e=t.message,te({message:e,type:"error",duration:6e3,showClose:!0})):te.error(t.message||e)}finally{Gt.value=!1}}else te.error("请输入有效的网易云音乐链接");else te.warning("请输入音乐链接")},da=_e(null),ma=_e({currentIndex:0,totalTracks:0,successfulTracks:[]}),pa=async e=>{if(Xt.value.trim())if(lt.validatePlaylistUrl(Xt.value)){oa(),ea.value=!0,da.value=null,ma.value={currentIndex:0,totalTracks:0,successfulTracks:[]};try{const t=await lt.getPlaylistDetail(Xt.value);if(!t.success)throw new Error(t.error);{ta.value=t.data,Wt.value=(t.data.tracks||[]).map(e=>({...e,parsed:!1})),qt.value=Wt.value.length,Nt.value=1,e&&e();const a=Math.floor((Date.now()-na.value)/1e3);me({title:"歌单解析完成！",message:`共 ${qt.value} 首歌曲，用时 ${a} 秒 ${Kt()}`,type:"success",duration:5e3})}}catch(t){let e="歌单解析失败，请检查链接是否正确";t.message&&t.message.includes("API服务器暂时不可用")?(e="API服务器暂时不可用，请稍后重试。这可能是由于服务器维护或网络问题导致的。",te({message:e,type:"warning",duration:8e3,showClose:!0})):t.message&&t.message.includes("网络请求失败")?(e=t.message,te({message:e,type:"error",duration:6e3,showClose:!0})):te.error(t.message||e)}finally{ca(),ea.value=!1,da.value=null}}else te.error("请输入有效的网易云音乐歌单链接");else te.warning("请输入歌单链接")},fa=async e=>{if(aa.value.trim())if(lt.validateAlbumUrl(aa.value)){la.value=!0,oa();try{const t=await lt.getAlbumDetail(aa.value);if(!t.success)throw new Error(t.error);sa.value=t.data,Wt.value=t.data.tracks.map(e=>({...e,parsed:!1})),qt.value=Wt.value.length,Nt.value=1,e&&e(),me({title:"专辑解析成功！",message:`成功解析专辑：${t.data.name} ${Kt()}`,type:"success"})}catch(t){te.error(t.message||"专辑解析失败，请检查链接是否正确")}finally{ca(),la.value=!1}}else te.error("请输入有效的网易云音乐专辑链接");else te.warning("请输入专辑链接")},ya=()=>{Yt.value=null,Jt.value=""},va=()=>{ta.value=null,Xt.value="",Wt.value=[],Qt.value=[],qt.value=0,Nt.value=1},ha=()=>{sa.value=null,aa.value="",Wt.value=[],Qt.value=[],qt.value=0,Nt.value=1},ga=(e,t)=>{"playlist"===t?Xt.value=e:"album"===t?aa.value=e:Jt.value=e},wa=_e(!1),ba=()=>{if("undefined"!=typeof window){const e=window.innerWidth<=768,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return e||t}return!1},_a=()=>{wa.value=ba()},xa=[{url:"https://music.163.com/song?id=1454730043",name:"赤伶",artist:"李玉刚"},{url:"https://music.163.com/song?id=1335942780",name:"九万字",artist:"黄诗扶"},{url:"https://music.163.com/song?id=110191",name:"暗里着迷",artist:"刘德华"}],ka=[{url:"https://music.163.com/playlist?id=7358627467",name:"华语经典流行",creator:"网易云音乐"},{url:"https://music.163.com/playlist?id=2884035",name:"那些回不去的年少时光",creator:"网易云音乐"},{url:"https://music.163.com/playlist?id=19723756",name:"云音乐飙升榜",creator:"网易云音乐"}],Ia=[{url:"https://music.163.com/#/album?id=10804",name:"第二天堂",artist:"林俊杰"},{url:"https://music.163.com/#/album?id=3056951",name:"新地球 - 人 (Special Edition)",artist:"林俊杰"},{url:"https://music.163.com/#/album?id=74956171",name:"进阶",artist:"林俊杰"}],Ea=e=>(e=>"playlist"===e?ka:"album"===e?Ia:xa)(e);var Ca={class:"header-content"},Ua={class:"header-left"},Ta={class:"logo"},$a={class:"header-view-title"},Aa={class:"header-right"},Va={class:"card-header"},Pa={class:"view-buttons"},Sa={class:"view-container"},Ma={class:"card-header"},za={class:"form-items-row"},La={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Da={class:"view-container"},Oa={class:"card-header"},ja={class:"form-items-row"},Fa={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Ba={class:"view-container"},Na={class:"card-header"},Ra={class:"form-items-row"},qa={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Wa={key:0,class:"playlist-section"},Qa={key:1,class:"player-section"},Za={class:"loading-placeholder"},Ha={key:2,class:"side-cards-inline"},Ka={class:"help-section"},Ja={class:"card-header"},Ga={class:"examples-section"},Ya={class:"section-title"},Xa={class:"example-list"},el=["onClick"],tl={class:"example-info"},al={class:"example-name"},ll={class:"example-artist"},sl={class:"formats-section"},nl={key:0,class:"format-list"},il={key:1,class:"format-list"},rl={key:2,class:"format-list"},ol={class:"card-header"},cl={class:"author-info"},ul={key:3,class:"fullscreen-loading"},dl={class:"loading-content"},ml={key:0,class:"loading-subtitle"},pl={key:1,class:"loading-subtitle"},fl={key:2,class:"loading-progress"},yl={class:"loading-timer"},vl={class:"side-column"},hl={class:"help-section"},gl={class:"card-header"},wl={class:"examples-section"},bl={class:"section-title"},_l={class:"example-list"},xl=["onClick"],kl={class:"example-info"},Il={class:"example-name"},El={class:"example-artist"},Cl={class:"formats-section"},Ul={key:0,class:"format-list"},Tl={key:1,class:"format-list"},$l={key:2,class:"format-list"},Al={class:"card-header"},Vl={class:"author-info"},Pl={class:"footer-content"},Sl={class:"footer-info"},Ml={class:"footer-links"},zl={class:"footer-text"},Ll={class:"tech-stack"},Dl={class:"build-info"},Ol={class:"settings-content"},jl={class:"setting-section"},Fl={class:"form-item-hint"},Bl={class:"setting-section"},Nl={class:"section-title"},Rl={class:"form-item-hint"},ql={class:"form-item-hint"},Wl={class:"form-item-hint"},Ql={class:"form-item-hint"},Zl={class:"setting-section"},Hl={class:"section-title"},Kl={class:"form-item-hint"},Jl={style:{display:"flex","align-items":"center",gap:"8px","flex-wrap":"wrap"}},Gl={class:"dialog-footer"},Yl={class:"welcome-content"},Xl={class:"welcome-icon"},es={class:"dialog-footer"},ts=T(st({__name:"App",setup(e){const a=_e("lossless"),s=_e(!1),n=_e(!1),i=()=>{const e=ze.value?"rgba(0,0,0,0.6)":"rgba(255,255,255,0.7)",t=ze.value?"切换为浅色模式…":"切换为深色模式…",a=oe.service({fullscreen:!0,lock:!0,text:t,background:e});requestAnimationFrame(()=>{ze.value=!ze.value,Le(ze.value),localStorage.setItem("theme",ze.value?"dark":"light"),setTimeout(()=>{a.close()},700)})},r=_e("music","playlist","album"),m=Object.entries(Ye).map(([e,t])=>({value:e,label:t})),h=ae(()=>{if("undefined"==typeof window)return!1;const e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e||"::1"===e});j(()=>{"undefined"!=typeof window&&window.removeEventListener("resize",_a),ca()}),ye(()=>{(()=>{try{const e=localStorage.getItem("app-settings");if(e){const t=JSON.parse(e);Object.assign(Ae,{...$e,...t})}}catch{Object.assign(Ae,$e)}})(),wa.value=ba(),"undefined"!=typeof window&&window.addEventListener("resize",_a),(()=>{const e="dark"===("undefined"!=typeof window?localStorage.getItem("theme"):null);ze.value=e,Le(e)})(),setTimeout(()=>{(function(e){const t=e+"=",a=document.cookie.split(";");for(let l=0;l<a.length;l++){let e=a[l];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null})("hasSeenWelcome")||(n.value=!0)},1e3)});const w=e=>{r.value=e,"music"===e?(va(),ha()):"playlist"===e?(ya(),ha()):"album"===e&&(ya(),va())},_=()=>{!function(e,t,a=365){let l="";if(a){const e=new Date;e.setTime(e.getTime()+24*a*60*60*1e3),l="; expires="+e.toUTCString()}document.cookie=`${e}=${t||""}${l}; path=/;SameSite=Lax`}("hasSeenWelcome","true",30),n.value=!1},k=(e,t)=>{"playlist"===r.value?(ga(e,"playlist"),te.success(`已选择示例歌单: ${t}`)):"album"===r.value?(ga(e,"album"),te.success(`已选择示例专辑: ${t}`)):(ga(e,"music"),te.success(`已选择示例歌曲: ${t}`))},T=async e=>{try{const t=e.track||e,l=e.quality||a.value,s="string"==typeof l?l:"lossless",n=`https://music.163.com/song?id=${t.id}`,i=await lt.parseMusicInfo(n,s);Yt.value=i,me({title:"解析成功",message:`成功解析歌曲：${i.name} (${i.qualityName})`,type:"success"})}catch(t){te.error(t.message||"解析失败，请稍后重试")}},A=()=>{},P=ae(()=>"playlist"===r.value&&ta.value?ta.value:"album"===r.value&&sa.value?{name:sa.value.name,creator:sa.value.artist,time:sa.value.publishTime,totalCount:sa.value.trackCount,tracks:sa.value.tracks,picUrl:sa.value.picUrl,isAlbum:!0}:null);return(e,M)=>{const z=ee("el-icon"),L=ee("el-button"),O=ee("el-header"),j=ee("el-card"),B=ee("el-input"),R=ee("el-form-item"),q=ee("el-tag"),W=ee("el-option"),Z=ee("el-select"),J=ee("el-form"),G=ee("el-skeleton"),Y=ee("el-divider"),X=ee("el-link"),ae=ee("el-alert"),le=ee("el-main"),ne=ee("el-aside"),oe=ee("el-container"),ue=ee("el-space"),me=ee("el-text"),fe=ee("el-footer"),ye=ee("el-switch"),ve=ee("el-dialog"),ge=ee("el-config-provider");return N(),H(ge,{size:"default"},{default:V(()=>[D(oe,{class:"app-container",direction:"vertical"},{default:V(()=>[D(O,{class:"app-header"},{default:V(()=>[ce("div",Ca,[ce("div",Ua,[ce("div",Ta,[D(z,{class:"logo-icon",size:24},{default:V(()=>[D(x(l))]),_:1}),M[35]||(M[35]=ce("span",{class:"logo-text"},"网易云音乐无损解析",-1))]),ce("span",$a,we("music"===r.value?"单曲解析":"playlist"===r.value?"歌单解析":"专辑解析"),1)]),ce("div",Aa,[D(L,{onClick:M[0]||(M[0]=e=>s.value=!0),type:"text",class:"settings-btn",icon:x(C),circle:"",size:"large"},null,8,["icon"])])])]),_:1}),D(oe,{class:"main-container"},{default:V(()=>[D(le,{class:"app-main"},{default:V(()=>[D(j,{class:"page-header-card",shadow:"hover"},{default:V(()=>[...M[36]||(M[36]=[ce("div",{class:"page-header"},[ce("h1",{class:"page-title"},"网易云音乐无损解析"),ce("p",{class:"page-description"},"永久免费的网易云音乐高品质解析")],-1)])]),_:1}),D(j,{class:"view-switcher-container",shadow:"hover"},{header:V(()=>[ce("div",Va,[D(z,null,{default:V(()=>[D(x(u))]),_:1}),M[37]||(M[37]=ce("span",null,"选择解析方式",-1))])]),default:V(()=>[ce("div",Pa,[D(L,{class:"view-btn",type:"music"===r.value?"primary":"default",plain:"music"!==r.value,round:"",size:"large",onClick:M[1]||(M[1]=e=>w("music"))},{default:V(()=>[...M[38]||(M[38]=[de("单曲解析",-1)])]),_:1},8,["type","plain"]),D(L,{class:"view-btn",type:"playlist"===r.value?"primary":"default",plain:"playlist"!==r.value,round:"",size:"large",onClick:M[2]||(M[2]=e=>w("playlist"))},{default:V(()=>[...M[39]||(M[39]=[de("歌单解析",-1)])]),_:1},8,["type","plain"]),D(L,{class:"view-btn",type:"album"===r.value?"primary":"default",plain:"album"!==r.value,round:"",size:"large",onClick:M[3]||(M[3]=e=>w("album"))},{default:V(()=>[...M[40]||(M[40]=[de("专辑解析",-1)])]),_:1},8,["type","plain"])])]),_:1}),he(ce("div",Sa,[D(j,{class:"input-card",shadow:"hover"},{header:V(()=>[ce("div",Ma,[D(z,null,{default:V(()=>[D(x(f))]),_:1}),M[41]||(M[41]=ce("span",null,"音乐链接解析",-1))])]),default:V(()=>[D(J,{model:{musicUrl:x(Jt),selectedQuality:a.value},"label-position":"left"},{default:V(()=>[D(R,{label:"音乐链接"},{default:V(()=>[D(B,{modelValue:x(Jt),"onUpdate:modelValue":M[4]||(M[4]=e=>ke(Jt)?Jt.value=e:null),placeholder:"请输入网易云音乐分享链接",clearable:"",onKeyup:$(x(ua),["enter"])},{prepend:V(()=>[D(z,null,{default:V(()=>[D(x(f))]),_:1})]),_:1},8,["modelValue","onKeyup"])]),_:1}),ce("div",za,[D(R,{label:"音质选择",class:"quality-item"},{default:V(()=>[D(Z,{modelValue:a.value,"onUpdate:modelValue":M[5]||(M[5]=e=>a.value=e),placeholder:"请选择音质",style:{width:"200px"}},{default:V(()=>[(N(!0),se(t,null,ie(x(m),e=>(N(),H(W,{key:e.value,label:e.label,value:e.value},{default:V(()=>[ce("div",La,[ce("span",null,we(e.label),1),"jymaster"===e.value?(N(),H(q,{key:0,type:"danger",size:"small"},{default:V(()=>[...M[42]||(M[42]=[de("最高",-1)])]),_:1})):"lossless"===e.value?(N(),H(q,{key:1,type:"success",size:"small"},{default:V(()=>[...M[43]||(M[43]=[de("推荐",-1)])]),_:1})):S("",!0)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),D(R,{label:"接口版本",class:"api-item"},{default:V(()=>[D(Z,{modelValue:x(Ae).apiVersion,"onUpdate:modelValue":M[6]||(M[6]=e=>x(Ae).apiVersion=e),placeholder:"请选择接口版本",style:{width:"200px"},onChange:M[7]||(M[7]=e=>x(Pe)("apiVersion",e))},{default:V(()=>[(N(!0),se(t,null,ie(e.apiVersionOptions,e=>(N(),H(W,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),D(R,null,{default:V(()=>[D(L,{type:"primary",onClick:M[8]||(M[8]=()=>x(ua)(a.value)),loading:x(Gt),disabled:!x(Jt).trim(),icon:x(I),style:{width:"100%"}},{default:V(()=>[de(we(x(Gt)?"解析中...":"开始解析"),1)]),_:1},8,["loading","disabled","icon"])]),_:1})]),_:1},8,["model"])]),_:1})],512),[[U,"music"===r.value]]),he(ce("div",Da,[D(j,{class:"input-card",shadow:"hover"},{header:V(()=>[ce("div",Oa,[D(z,null,{default:V(()=>[D(x(y))]),_:1}),M[44]||(M[44]=ce("span",null,"歌单链接解析",-1))])]),default:V(()=>[D(J,{model:{playlistUrl:x(Xt)},"label-position":"left"},{default:V(()=>[D(R,{label:"歌单链接"},{default:V(()=>[D(B,{modelValue:x(Xt),"onUpdate:modelValue":M[9]||(M[9]=e=>ke(Xt)?Xt.value=e:null),placeholder:"请输入网易云音乐歌单链接（支持短链接 163cn.tv/xxx）",clearable:"",onKeyup:$(x(pa),["enter"])},{prepend:V(()=>[D(z,null,{default:V(()=>[D(x(f))]),_:1})]),_:1},8,["modelValue","onKeyup"])]),_:1}),ce("div",ja,[D(R,{label:"音质选择",class:"quality-item"},{default:V(()=>[D(Z,{modelValue:a.value,"onUpdate:modelValue":M[10]||(M[10]=e=>a.value=e),placeholder:"请选择音质",style:{width:"200px"}},{default:V(()=>[(N(!0),se(t,null,ie(x(m),e=>(N(),H(W,{key:e.value,label:e.label,value:e.value},{default:V(()=>[ce("div",Fa,[ce("span",null,we(e.label),1),"jymaster"===e.value?(N(),H(q,{key:0,type:"danger",size:"small"},{default:V(()=>[...M[45]||(M[45]=[de("最高",-1)])]),_:1})):"lossless"===e.value?(N(),H(q,{key:1,type:"success",size:"small"},{default:V(()=>[...M[46]||(M[46]=[de("推荐",-1)])]),_:1})):S("",!0)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),D(R,{label:"接口版本",class:"api-item"},{default:V(()=>[D(Z,{modelValue:x(Ae).apiVersion,"onUpdate:modelValue":M[11]||(M[11]=e=>x(Ae).apiVersion=e),placeholder:"请选择接口版本",style:{width:"200px"},onChange:M[12]||(M[12]=e=>x(Pe)("apiVersion",e))},{default:V(()=>[(N(!0),se(t,null,ie(e.apiVersionOptions,e=>(N(),H(W,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),D(R,null,{default:V(()=>[D(L,{type:"primary",onClick:M[13]||(M[13]=()=>x(pa)(x(Zt))),loading:x(ea),disabled:!x(Xt).trim(),icon:x(I),style:{width:"100%"}},{default:V(()=>[de(we(x(ea)?"解析中...":"开始解析"),1)]),_:1},8,["loading","disabled","icon"])]),_:1})]),_:1},8,["model"])]),_:1})],512),[[U,"playlist"===r.value]]),he(ce("div",Ba,[D(j,{class:"input-card",shadow:"hover"},{header:V(()=>[ce("div",Na,[D(z,null,{default:V(()=>[D(x(o))]),_:1}),M[47]||(M[47]=ce("span",null,"专辑链接解析",-1))])]),default:V(()=>[D(J,{model:{albumUrl:x(aa)},"label-position":"left"},{default:V(()=>[D(R,{label:"专辑链接"},{default:V(()=>[D(B,{modelValue:x(aa),"onUpdate:modelValue":M[14]||(M[14]=e=>ke(aa)?aa.value=e:null),placeholder:"请输入网易云音乐专辑链接（支持短链接 163cn.tv/xxx）",clearable:"",onKeyup:$(x(fa),["enter"])},{prepend:V(()=>[D(z,null,{default:V(()=>[D(x(f))]),_:1})]),_:1},8,["modelValue","onKeyup"])]),_:1}),ce("div",Ra,[D(R,{label:"音质选择",class:"quality-item"},{default:V(()=>[D(Z,{modelValue:a.value,"onUpdate:modelValue":M[15]||(M[15]=e=>a.value=e),placeholder:"请选择音质",style:{width:"200px"}},{default:V(()=>[(N(!0),se(t,null,ie(x(m),e=>(N(),H(W,{key:e.value,label:e.label,value:e.value},{default:V(()=>[ce("div",qa,[ce("span",null,we(e.label),1),"jymaster"===e.value?(N(),H(q,{key:0,type:"danger",size:"small"},{default:V(()=>[...M[48]||(M[48]=[de("最高",-1)])]),_:1})):"lossless"===e.value?(N(),H(q,{key:1,type:"success",size:"small"},{default:V(()=>[...M[49]||(M[49]=[de("推荐",-1)])]),_:1})):S("",!0)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),D(R,{label:"接口版本",class:"api-item"},{default:V(()=>[D(Z,{modelValue:x(Ae).apiVersion,"onUpdate:modelValue":M[16]||(M[16]=e=>x(Ae).apiVersion=e),placeholder:"请选择接口版本",style:{width:"200px"},onChange:M[17]||(M[17]=e=>x(Pe)("apiVersion",e))},{default:V(()=>[(N(!0),se(t,null,ie(e.apiVersionOptions,e=>(N(),H(W,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),D(R,null,{default:V(()=>[D(L,{type:"primary",onClick:M[18]||(M[18]=()=>x(fa)(x(Zt))),loading:x(la),disabled:!x(aa).trim(),icon:x(I),style:{width:"100%"}},{default:V(()=>[de(we(x(la)?"解析中...":"开始解析"),1)]),_:1},8,["loading","disabled","icon"])]),_:1})]),_:1},8,["model"])]),_:1})],512),[[U,"album"===r.value]]),P.value?(N(),se("div",Wa,[D(Bt,{"playlist-info":P.value,"display-tracks":x(Qt),"current-page":x(Nt),"page-size":x(Rt),"total-tracks":x(qt),"selected-quality":a.value,settings:x(Ae),onTrackParsed:T,onTrackSelected:A,onPageChange:x(Ht)},null,8,["playlist-info","display-tracks","current-page","page-size","total-tracks","selected-quality","settings","onPageChange"])])):S("",!0),x(Yt)?(N(),se("div",Qa,[(N(),H(F,null,{default:V(()=>[D(bt,{"music-info":x(Yt),settings:x(Ae)},null,8,["music-info","settings"])]),fallback:V(()=>[ce("div",Za,[D(G,{rows:3,animated:""}),M[50]||(M[50]=ce("div",{class:"loading-text"},"正在加载播放器...",-1))])]),_:1}))])):S("",!0),x(wa)||"dual-column"!==x(Ae).layoutMode?(N(),se("div",Ha,[ce("div",Ka,[D(j,{shadow:"hover"},{header:V(()=>[ce("div",Ja,[D(z,null,{default:V(()=>[D(x(re))]),_:1}),M[51]||(M[51]=ce("span",null,"示例歌曲与支持格式",-1))])]),default:V(()=>[ce("div",Ga,[ce("h4",Ya,we("playlist"===r.value?"📋 热门歌单":"album"===r.value?"💿 热门专辑":"🎧 热门示例"),1),ce("div",Xa,[(N(!0),se(t,null,ie(x(Ea)(r.value),(e,t)=>(N(),se("div",{key:t,class:"example-item",onClick:t=>k(e.url,e.name)},[ce("div",tl,[ce("div",al,we(e.name),1),ce("div",ll,we("playlist"===r.value?e.creator:e.artist),1)]),D(L,{type:"text",size:"small"},{default:V(()=>[...M[52]||(M[52]=[de("使用",-1)])]),_:1})],8,el))),128))])]),D(Y),ce("div",sl,[M[67]||(M[67]=ce("h4",{class:"section-title"},"📋 支持格式",-1)),"music"===r.value?(N(),se("div",nl,[D(q,{class:"format-item",type:"info"},{default:V(()=>[...M[53]||(M[53]=[de("music.163.com/song?id=xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"info"},{default:V(()=>[...M[54]||(M[54]=[de("y.music.163.com/m/song/xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"info"},{default:V(()=>[...M[55]||(M[55]=[de("music.163.com/#/song?id=xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"info"},{default:V(()=>[...M[56]||(M[56]=[de("163cn.tv/xxx",-1)])]),_:1})])):"playlist"===r.value?(N(),se("div",il,[D(q,{class:"format-item",type:"success"},{default:V(()=>[...M[57]||(M[57]=[de("music.163.com/playlist?id=xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"success"},{default:V(()=>[...M[58]||(M[58]=[de("music.163.com/#/playlist?id=xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"success"},{default:V(()=>[...M[59]||(M[59]=[de("y.music.163.com/m/playlist/xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"success"},{default:V(()=>[...M[60]||(M[60]=[de("163cn.tv/xxx",-1)])]),_:1})])):"album"===r.value?(N(),se("div",rl,[D(q,{class:"format-item",type:"warning"},{default:V(()=>[...M[61]||(M[61]=[de("music.163.com/album?id=xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"warning"},{default:V(()=>[...M[62]||(M[62]=[de("music.163.com/album/xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"warning"},{default:V(()=>[...M[63]||(M[63]=[de("music.163.com/#/album?id=xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"warning"},{default:V(()=>[...M[64]||(M[64]=[de("music.163.com/#/album/xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"warning"},{default:V(()=>[...M[65]||(M[65]=[de("y.music.163.com/m/album/xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"warning"},{default:V(()=>[...M[66]||(M[66]=[de("163cn.tv/xxx",-1)])]),_:1})])):S("",!0)])]),_:1})]),D(j,{class:"author-card",shadow:"hover"},{header:V(()=>[ce("div",ol,[D(z,null,{default:V(()=>[D(x(p))]),_:1}),M[68]||(M[68]=ce("span",null,"作者与联系",-1))])]),default:V(()=>[ce("div",cl,[M[75]||(M[75]=ce("p",null,[ce("strong",null,"作者："),de(" 苏晓晴")],-1)),ce("p",null,[M[70]||(M[70]=ce("strong",null,"个人博客：",-1)),M[71]||(M[71]=de()),D(X,{type:"primary",href:"https://www.toubiec.cn",target:"_blank"},{default:V(()=>[...M[69]||(M[69]=[de("点击跳转",-1)])]),_:1})]),M[76]||(M[76]=ce("p",null,[ce("strong",null,"联系方式："),de(" QQ3074193836")],-1)),M[77]||(M[77]=ce("p",null,[ce("strong",null,"版权声明："),de(" 本工具仅用于学习交流，不提供任何音频文件存储服务。")],-1)),ce("p",null,[M[73]||(M[73]=ce("strong",null,"反馈地址：",-1)),M[74]||(M[74]=de()),D(X,{type:"primary",href:"https://github.com/Suxiaoqinx/Netease_url/issues",target:"_blank"},{default:V(()=>[...M[72]||(M[72]=[de("点击跳转",-1)])]),_:1})]),M[78]||(M[78]=ce("p",null,"如果您在使用中遇到任何问题，或有任何建议，欢迎联系！",-1))])]),_:1})])):S("",!0),x(ea)?(N(),se("div",ul,[ce("div",dl,[D(z,{class:"loading-icon",size:48},{default:V(()=>[D(x(Ie))]),_:1}),M[79]||(M[79]=ce("div",{class:"loading-text"},"正在解析歌单中...",-1)),x(da)?(N(),se("div",ml," 正在解析："+we(x(da).name)+" - "+we(x(da).artist),1)):(N(),se("div",pl," 请稍候，正在获取歌单信息 ")),x(ma).totalTracks>0?(N(),se("div",fl," 进度："+we(x(ma).currentIndex+1)+" / "+we(x(ma).totalTracks)+" (成功："+we(x(ma).successfulTracks.filter(e=>e.parsed).length)+") ",1)):S("",!0),ce("div",yl,"已用时间："+we(x(ia))+"秒",1)])])):S("",!0),D(j,{class:"disclaimer-card",shadow:"hover"},{default:V(()=>[D(ae,{title:"免责声明",description:"本工具仅供学习交流使用，请支持正版音乐。使用本工具时请遵守相关法律法规，尊重音乐人的劳动成果。",type:"warning",closable:!1,"show-icon":"",center:""})]),_:1})]),_:1}),x(wa)||"dual-column"!==x(Ae).layoutMode?S("",!0):(N(),H(ne,{key:0,class:"app-aside",width:"340px"},{default:V(()=>[ce("div",vl,[ce("div",hl,[D(j,{shadow:"hover"},{header:V(()=>[ce("div",gl,[D(z,null,{default:V(()=>[D(x(re))]),_:1}),M[80]||(M[80]=ce("span",null,"示例歌曲与支持格式",-1))])]),default:V(()=>[ce("div",wl,[ce("h4",bl,we("playlist"===r.value?"📋 热门歌单":"album"===r.value?"💿 热门专辑":"🎧 热门示例"),1),ce("div",_l,[(N(!0),se(t,null,ie(x(Ea)(r.value),(e,t)=>(N(),se("div",{key:t,class:"example-item",onClick:t=>k(e.url,e.name)},[ce("div",kl,[ce("div",Il,we(e.name),1),ce("div",El,we("playlist"===r.value?e.creator:e.artist),1)]),D(L,{type:"text",size:"small"},{default:V(()=>[...M[81]||(M[81]=[de("使用",-1)])]),_:1})],8,xl))),128))])]),D(Y),ce("div",Cl,[M[95]||(M[95]=ce("h4",{class:"section-title"},"📋 支持格式",-1)),"music"===r.value?(N(),se("div",Ul,[D(q,{class:"format-item",type:"info"},{default:V(()=>[...M[82]||(M[82]=[de("music.163.com/song?id=xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"info"},{default:V(()=>[...M[83]||(M[83]=[de("y.music.163.com/m/song/xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"info"},{default:V(()=>[...M[84]||(M[84]=[de("music.163.com/#/song?id=xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"info"},{default:V(()=>[...M[85]||(M[85]=[de("163cn.tv/xxx",-1)])]),_:1})])):"playlist"===r.value?(N(),se("div",Tl,[D(q,{class:"format-item",type:"success"},{default:V(()=>[...M[86]||(M[86]=[de("music.163.com/playlist?id=xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"success"},{default:V(()=>[...M[87]||(M[87]=[de("music.163.com/#/playlist?id=xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"success"},{default:V(()=>[...M[88]||(M[88]=[de("y.music.163.com/m/playlist/xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"success"},{default:V(()=>[...M[89]||(M[89]=[de("music.163.com/discover/toplist?id=xxx",-1)])]),_:1})])):"album"===r.value?(N(),se("div",$l,[D(q,{class:"format-item",type:"warning"},{default:V(()=>[...M[90]||(M[90]=[de("music.163.com/album?id=xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"warning"},{default:V(()=>[...M[91]||(M[91]=[de("music.163.com/album/xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"warning"},{default:V(()=>[...M[92]||(M[92]=[de("music.163.com/#/album?id=xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"warning"},{default:V(()=>[...M[93]||(M[93]=[de("music.163.com/#/album/xxx",-1)])]),_:1}),D(q,{class:"format-item",type:"warning"},{default:V(()=>[...M[94]||(M[94]=[de("y.music.163.com/m/album/xxx",-1)])]),_:1})])):S("",!0)])]),_:1})]),D(j,{class:"author-card",shadow:"hover"},{header:V(()=>[ce("div",Al,[D(z,null,{default:V(()=>[D(x(p))]),_:1}),M[96]||(M[96]=ce("span",null,"作者与联系",-1))])]),default:V(()=>[ce("div",Vl,[M[103]||(M[103]=ce("p",null,[ce("strong",null,"作者："),de(" 苏晓晴")],-1)),ce("p",null,[M[98]||(M[98]=ce("strong",null,"个人博客：",-1)),M[99]||(M[99]=de()),D(X,{type:"primary",href:"https://www.toubiec.cn",target:"_blank"},{default:V(()=>[...M[97]||(M[97]=[de("点击跳转",-1)])]),_:1})]),M[104]||(M[104]=ce("p",null,[ce("strong",null,"联系方式："),de(" QQ3074193836")],-1)),M[105]||(M[105]=ce("p",null,[ce("strong",null,"版权声明："),de(" 本工具仅用于学习交流，不提供任何音频文件存储服务。")],-1)),ce("p",null,[M[101]||(M[101]=ce("strong",null,"反馈地址：",-1)),M[102]||(M[102]=de()),D(X,{type:"primary",href:"https://github.com/Suxiaoqinx/Netease_url/issues",target:"_blank"},{default:V(()=>[...M[100]||(M[100]=[de("点击跳转",-1)])]),_:1})]),M[106]||(M[106]=ce("p",null,"如果您在使用中遇到任何问题，或有任何建议，欢迎联系！",-1))])]),_:1})])]),_:1}))]),_:1}),D(fe,{class:"app-footer"},{default:V(()=>[ce("div",Pl,[ce("div",Sl,[ce("div",Ml,[D(ue,{size:20,wrap:""},{default:V(()=>[D(X,{href:"https://github.com/Suxiaoqinx/Netease_url",target:"_blank",underline:!1},{default:V(()=>[D(z,null,{default:V(()=>[...M[107]||(M[107]=[ce("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[ce("path",{fill:"currentColor",d:"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"})],-1)])]),_:1}),M[108]||(M[108]=de(" GitHub ",-1))]),_:1}),D(X,{href:"https://music.163.com",target:"_blank",underline:!1},{default:V(()=>[D(z,null,{default:V(()=>[...M[109]||(M[109]=[ce("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[ce("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 4c-2.93 1.346-5 5.046-5 8.492C4 17 8 20 12 20s8-3 8-7c0-3.513-3.5-5.513-6-5.513S9 9 9 12c0 2 1.5 3 3 3s3-1 3-3c0-3.513-2-4.508-2-6.515c0-3.504 3.5-2.603 4-1.502"})],-1)])]),_:1}),M[110]||(M[110]=de(" 网易云音乐 ",-1))]),_:1}),D(X,{href:"https://element-plus.org",target:"_blank",underline:!1},{default:V(()=>[D(z,null,{default:V(()=>[D(x(g))]),_:1}),M[111]||(M[111]=de(" Element Plus ",-1))]),_:1})]),_:1})]),D(Y),ce("div",zl,[ce("div",Ll,[D(q,{size:"small",type:"success"},{default:V(()=>[...M[112]||(M[112]=[de("Vue 3",-1)])]),_:1}),D(q,{size:"small",type:"primary"},{default:V(()=>[...M[113]||(M[113]=[de("Element Plus",-1)])]),_:1}),D(q,{size:"small",type:"warning"},{default:V(()=>[...M[114]||(M[114]=[de("Vite",-1)])]),_:1}),D(q,{size:"small",type:"info"},{default:V(()=>[...M[115]||(M[115]=[de("JavaScript",-1)])]),_:1})]),M[117]||(M[117]=ce("div",{class:"copyright"}," © 2024 - 2025 网易云音乐无损解析 - 仅供学习交流使用 ",-1)),ce("div",Dl,[D(me,{size:"small",type:"info"},{default:V(()=>[...M[116]||(M[116]=[de(" 构建时间: 2025/11/29 | 版本: v1.1.9 ",-1)])]),_:1})])])])])]),_:1})]),_:1}),(N(),H(pe,{to:"body"},[D(ve,{modelValue:s.value,"onUpdate:modelValue":M[32]||(M[32]=e=>s.value=e),title:"网站设置",width:x(wa)?"100%":"600px",fullscreen:x(wa),"close-on-click-modal":!0,"show-close":!0,class:"settings-dialog"},{footer:V(()=>[ce("div",Gl,[D(L,{type:"primary",onClick:M[31]||(M[31]=e=>{x(Ve)(),s.value=!1}),icon:x(K)},{default:V(()=>[...M[125]||(M[125]=[de("完成",-1)])]),_:1},8,["icon"])])]),default:V(()=>[ce("div",Ol,[ce("div",jl,[D(J,{model:x(Ae),"label-width":"120px","label-position":"left",class:"settings-form"},{default:V(()=>[D(R,{label:"PC端布局模式"},{default:V(()=>[D(Z,{modelValue:x(Ae).layoutMode,"onUpdate:modelValue":M[19]||(M[19]=e=>x(Ae).layoutMode=e),onChange:M[20]||(M[20]=()=>{x(Ve)(),x(te).success("布局模式已保存")}),style:{width:"160px"}},{default:V(()=>[D(W,{label:"双栏",value:"dual-column"}),D(W,{label:"单栏",value:"single-column"})]),_:1},8,["modelValue"]),ce("div",Fl,[D(me,{type:"info",size:"small"},{default:V(()=>[...M[118]||(M[118]=[de("仅在PC端生效；用于切换双栏或单栏布局",-1)])]),_:1})])]),_:1})]),_:1},8,["model"])]),ce("div",Bl,[ce("div",Nl,[D(z,null,{default:V(()=>[D(x(v))]),_:1}),M[119]||(M[119]=ce("span",null,"下载配置",-1))]),D(J,{model:x(Ae),"label-width":"120px","label-position":"left",class:"settings-form"},{default:V(()=>[D(R,{label:"文件命名格式"},{default:V(()=>[D(Z,{modelValue:x(Ae).filenameFormat,"onUpdate:modelValue":M[21]||(M[21]=e=>x(Ae).filenameFormat=e),placeholder:"请选择命名格式",style:{width:"160px"},onChange:M[22]||(M[22]=()=>{x(Ve)(),x(te).success("文件命名格式已保存")})},{default:V(()=>[D(W,{label:"歌曲名 - 歌手名",value:"song-artist"}),D(W,{label:"歌手名 - 歌曲名",value:"artist-song"}),D(W,{label:"仅歌曲名",value:"song-only"})]),_:1},8,["modelValue"]),ce("div",Rl,[D(me,{type:"info",size:"small"},{default:V(()=>[de(" 示例："+we("artist-song"===x(Ae).filenameFormat?"周杰伦 - 夜曲":"song-only"===x(Ae).filenameFormat?"夜曲":"夜曲 - 周杰伦"),1)]),_:1})])]),_:1}),D(R,{label:"自动写入元数据"},{default:V(()=>[D(ye,{modelValue:x(Ae).writeMetadata,"onUpdate:modelValue":M[23]||(M[23]=e=>x(Ae).writeMetadata=e),onChange:M[24]||(M[24]=()=>{x(Ve)(),x(te).success("元数据设置已保存")})},null,8,["modelValue"]),ce("div",ql,[D(me,{type:"info",size:"small"},{default:V(()=>[...M[120]||(M[120]=[de("写入歌曲名、歌手、专辑、封面等信息（不支持杜比全景声）",-1)])]),_:1})])]),_:1}),D(R,{label:"启用ZIP打包"},{default:V(()=>[D(ye,{modelValue:x(Ae).zipDownload,"onUpdate:modelValue":M[25]||(M[25]=e=>x(Ae).zipDownload=e),onChange:M[26]||(M[26]=()=>{x(Ve)(),x(te).success("ZIP打包设置已保存")})},null,8,["modelValue"]),ce("div",Wl,[D(me,{type:"info",size:"small"},{default:V(()=>[...M[121]||(M[121]=[de("打包音频、歌词、封面、信息文件为一个压缩包",-1)])]),_:1})])]),_:1}),D(R,{label:"歌词格式"},{default:V(()=>[D(ye,{modelValue:x(Ae).srtLyricsDownload,"onUpdate:modelValue":M[27]||(M[27]=e=>x(Ae).srtLyricsDownload=e),onChange:M[28]||(M[28]=()=>{x(Ve)(),x(te).success("歌词格式设置已保存")}),"active-text":"SRT","inactive-text":"LRC"},null,8,["modelValue"]),ce("div",Ql,[D(me,{type:"info",size:"small"},{default:V(()=>[...M[122]||(M[122]=[de("开启为 SRT 字幕；关闭为 LRC 歌词",-1)])]),_:1})])]),_:1})]),_:1},8,["model"])]),ce("div",Zl,[ce("div",Hl,[D(z,null,{default:V(()=>[D(x(b))]),_:1}),M[123]||(M[123]=ce("span",null,"解析配置",-1))]),D(J,{model:x(Ae),"label-width":"120px","label-position":"left",class:"settings-form"},{default:V(()=>[D(R,{label:"启用链接缓存"},{default:V(()=>[D(ye,{modelValue:x(Ae).enableUrlCache,"onUpdate:modelValue":M[29]||(M[29]=e=>x(Ae).enableUrlCache=e),onChange:M[30]||(M[30]=()=>{x(Ve)(),x(te).success("链接缓存设置已保存")})},null,8,["modelValue"]),ce("div",Kl,[D(me,{type:"info",size:"small"},{default:V(()=>[...M[124]||(M[124]=[de("减少重复解析，提升相同歌曲再次播放速度",-1)])]),_:1})])]),_:1}),D(R,{label:"环境与版本"},{default:V(()=>[ce("div",Jl,[D(q,{type:h.value?"success":"info",size:"small"},{default:V(()=>[de(we(h.value?"Dev环境":"Prod环境"),1)]),_:1},8,["type"])])]),_:1})]),_:1},8,["model"])])])]),_:1},8,["modelValue","width","fullscreen"])])),D(ve,{modelValue:n.value,"onUpdate:modelValue":M[33]||(M[33]=e=>n.value=e),title:"系统公告",width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,center:"",class:"welcome-dialog"},{footer:V(()=>[ce("div",es,[D(L,{type:"primary",onClick:_,size:"large"},{default:V(()=>[...M[128]||(M[128]=[de(" 我知道了 ",-1)])]),_:1})])]),default:V(()=>[ce("div",Yl,[ce("div",Xl,[D(z,{size:48,color:"#409EFF"},{default:V(()=>[D(x(d))]),_:1})]),M[126]||(M[126]=ce("h3",{class:"welcome-title"},"欢迎使用网易云音乐解析系统！",-1)),M[127]||(M[127]=ce("div",{class:"welcome-message"},[ce("p",null,"如果无法下载或下载后找不到文件请更换浏览器下载!")],-1))])]),_:1},8,["modelValue"]),D(L,{class:"floating-theme-btn floating-fab",type:"default",circle:"",size:"large",onClick:M[34]||(M[34]=e=>i()),title:x(ze)?"切换为浅色":"切换为深色"},{icon:V(()=>[D(z,{size:22},{default:V(()=>[(N(),H(Q(x(ze)?x(c):x(E))))]),_:1})]),_:1},8,["title"])]),_:1})}}},[["__scopeId","data-v-e0b9c34d"]]));ts.component("ElButton",h),ts.component("ElInput",J),ts.component("ElSelect",B),ts.component("ElOption",O),ts.component("ElForm",X),ts.component("ElFormItem",W),ts.component("ElCard",i),ts.component("ElContainer",xe),ts.component("ElHeader",be),ts.component("ElMain",_),ts.component("ElFooter",M),ts.component("ElConfigProvider",s),ts.component("ElIcon",m),ts.component("ElTag",ge),ts.component("ElLink",ne),ts.component("ElText",Z),ts.component("ElDivider",A),ts.component("ElSpace",L),ts.component("ElDialog",ve),ts.component("ElDrawer",R),ts.component("ElAlert",a),ts.component("ElProgress",G),ts.component("ElRadio",k),ts.component("ElRadioGroup",r),ts.component("ElSwitch",ue),ts.component("ElTabs",le),ts.component("ElTabPane",P),ts.component("ElPagination",fe),ts.config.globalProperties.$message=te,ts.mount("#app");